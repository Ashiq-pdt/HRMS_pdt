<!-- templates/admin/index.html -->

{% extends "layout/base.html" %}
{% block head %}
{{ super() }}
<style>
    .sb-title {
        position: relative;
        top: -12px;
        font-family: Roboto, sans-serif;
        font-weight: 500;
    }

    .s-btitle-icon {
        position: relative;
        top: -5px;
    }

    .card-container {
        display: flex;
        height: 500px;
        width: 600px;
    }

    .panel {
        background: white;
        width: 300px;
        padding: 20px;
        display: flex;
        flex-direction: column;
        justify-content: space-around;
    }

    .half-input-container {
        display: flex;
        justify-content: space-between;
    }

    .half-input {
        max-width: 120px;
    }

    .map {
        width: 100%;
    }

    h2 {
        margin: 0;
        font-family: Roboto, sans-serif;
    }

    input:focus::placeholder {
        color: white;
    }

    .pac-container,
    .popover {
        z-index: 10000 !important;
    }

    .select2-container--default .select2-selection--multiple .select2-selection__choice {
        padding-right: 10px !important;
    }
</style>
<link rel="stylesheet" href="{{ url_for('static', filename='assets/plugins/daterangepicker/daterangepicker.css') }}">

{% endblock %}
{% block content %}
<!--Page header-->
<div class="page-header d-xl-flex d-block">
    <div class="page-leftheader">
        <div class="page-title">Settings</div>
    </div>
    <div class="page-rightheader ms-md-auto">
        <div class="d-flex align-items-end flex-wrap my-auto end-content breadcrumb-end">
            <div class="btn-list">
                <button class="btn btn-light" data-bs-toggle="tooltip" data-bs-placement="top" title="E-mail"> <i
                        class="feather feather-mail"></i> </button>
                <button class="btn btn-light" data-bs-placement="top" data-bs-toggle="tooltip" title="Contact"> <i
                        class="feather feather-phone-call"></i> </button>
                <button class="btn btn-primary" data-bs-placement="top" data-bs-toggle="tooltip" title="Info"> <i
                        class="feather feather-info"></i> </button>
            </div>
        </div>
    </div>
</div>
<!--End Page header-->

<!-- Row -->
<div class="row">
    <div class="col-md-12 col-xl-3">
        <div class="card">
            <div class="nav flex-column admisetting-tabs" id="settings-tab" role="tablist" aria-orientation="vertical">
                <a class="nav-link active" data-bs-toggle="pill" href="#tab-1" role="tab">
                    <i class="nav-icon las la-cog"></i> General Settings
                </a>
                <a class="nav-link" data-bs-toggle="pill" href="#tab-3" role="tab">
                    <i class="nav-icon las la-envelope"></i> Email Settings
                </a>
                <a class="nav-link" data-bs-toggle="pill" href="#tab-2" role="tab">
                    <i class="nav-icon fa fa-bullhorn"></i> Alert Settings
                </a>

                <a class="nav-link" data-bs-toggle="pill" href="#tab-4" role="tab">
                    <i class="nav-icon fe fe-command"></i> Leave Settings
                </a>
                <a class="nav-link" data-bs-toggle="pill" href="#tab-5" role="tab">
                    <i class="nav-icon las la-edit"></i> Attendance Settings
                </a>
                <a class="nav-link" data-bs-toggle="pill" href="#tab-6" role="tab">
                    <i class="nav-icon fe fe-box"></i> Payroll Settings
                </a>
                <a class="nav-link" data-bs-toggle="pill" href="#tab-7" role="tab">
                    <i class="nav-icon fa fa-key"></i> Role Management
                </a>
                <a class="nav-link" data-bs-toggle="pill" href="#tab-8" role="tab">
                    <i class="nav-icon fa fa-globe"></i> SIF Settings
                </a>
                <a class="nav-link" data-bs-toggle="pill" href="#tab-9" role="tab">
                    <i class="nav-icon fe fe-edit-3"></i> Letter Settings
                </a>
                <a class="nav-link" data-bs-toggle="pill" href="#tab-10" role="tab">
                    <i class="nav-icon fe fe-home"></i> Sub Companies Settings
                </a>
                <a class="nav-link" data-bs-toggle="pill" href="#tab-12" role="tab">
                    <i class="nav-icon fe fe-box"></i> Biometrics Settings
                </a>
                {% if multiple_access_doc %}
                <a class="nav-link" data-bs-toggle="pill" href="#tab-13" role="tab">
                    <i class="nav-icon fe fe-server"></i> Multiple Access Settings
                </a>
                {% endif %}

                <!-- <a class="nav-link"  data-bs-toggle="pill" href="#tab-5" role="tab">
                    <i class="nav-icon las la-palette"></i> Theme Settings
                </a> -->
            </div>
        </div>
    </div>
    <div class="col-md-12 col-xl-9">
        <div class="tab-content adminsetting-content" id="setting-tabContent">
            <div class="tab-pane fade show active" id="tab-1" role="tabpanel">
                <form class="card-body pt-3" method="POST" action="/update/settings/" enctype="multipart/form-data">
                    <div class="card">
                        <div class="card-header  border-0">
                            <h4 class="card-title">General Settings</h4>
                        </div>
                        <div class="card-body">

                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Company Name</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control" placeholder="Name"
                                            value="{{company_details.company_name}}" name="company_name">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Company Email</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control" placeholder="Name"
                                            value="{{company_details.company_email}}" name="company_email">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Company Address</label>
                                    </div>
                                    <div class="col-md-9">
                                        <textarea rows="2" class="form-control" placeholder="Address"
                                            name="company_address">{{company_details.company_address}}</textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Contact Number</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control" placeholder="Contact No"
                                            value="{{company_details.company_contact_no}}" name="company_contact_no">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Website</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control" placeholder="Website"
                                            value="{{company_details.company_website}}" name="company_website">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Currency</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control" placeholder="Website"
                                            value="{{company_details.Currency}}" name="company_Currency">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Time Zone</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control" placeholder="Website"
                                            value="{{company_details.Timezone}}" name="company_Timezone">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Upload Company Logo</label>
                                    </div>
                                    <div class="col-md-9">
                                        <div class="form-group">
                                            <label for="form-label" class="form-label"></label>
                                            <input class="form-control" type="file" name="company_logo">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-footer">
                            <!-- <a  href="javascript:void(0);" class="btn btn-success">Save Changes</a> -->
                            <button class="btn btn-success">Save Changes</button>
                            <a href="javascript:void(0);" class="btn btn-danger">Cancel</a>
                        </div>
                </form>
            </div>
        </div>
        <div class="tab-pane fade show" id="tab-2" role="tabpanel">
            <!-- <div class="card-body">
                <form class="pt-3" method="POST" action="/update/alerts/" enctype="multipart/form-data">
                    <div class="card">
                        <div class="card-header  border-0">
                            <h4 class="card-title">Alert Settings</h4>
                        </div>
                        <div class="card-body">
                            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Passport Expiry Alerts(In Days)</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="number" class="form-control" placeholder="Passport Expiry Alert"
                                            value="{{company_details.passport_expiry_alert | default('0')}}"
                                            name="passport_expiry_alert">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Emirates Expiry Alerts(In Days)</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="number" class="form-control" placeholder="Passport Expiry Alert"
                                            value="{{company_details.emirates_expiry_alert | default('0')}}"
                                            name="emirates_expiry_alert">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Visa Expiry Alerts(In Days)</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="number" class="form-control" placeholder="Visa Expiry Alert"
                                            value="{{company_details.visa_expiry_alert | default('0')}}"
                                            name="visa_expiry_alert">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Labour Contract Expiry Alerts(In
                                            Days)</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="number" class="form-control"
                                            placeholder="Labour Contract Expiry Alert"
                                            value="{{company_details.labour_expiry_alert | default('0')}}"
                                            name="labour_expiry_alert">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Other Documents Expiry Alerts(In
                                            Days)</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="number" class="form-control"
                                            placeholder="Other Document Expiry Alert"
                                            value="{{company_details.other_expiry_alert | default('0')}}"
                                            name="other_expiry_alert">
                                    </div>
                                </div>
                            </div>

                        </div>
                        <div class="card-footer">
                            <button class="btn btn-success">Save Changes</button>
                            <a href="javascript:void(0);" class="btn btn-danger">Cancel</a>
                        </div>
                    </div>
                </form>
            </div> -->
            <!--Row-->
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header border-bottom-0">
                            <h3 class="card-title ">Alert Settings</h3>
                        </div>
                        <div class="card-body">
                            <!-- Accordion begin -->
                            <ul class="demo-accordion accordionjs m-0" data-active-index="false">
                                <!-- Section 1 Leave Cycle -->
                                <li>
                                    <div class="card-header  border-0">
                                        <h3>Default Alert Days</h3>
                                    </div>
                                    <form class="pt-3" method="POST" action="/update/alerts/"
                                        enctype="multipart/form-data">
                                        <div class="card">
                                            <div class="card-header  border-0">
                                                <h4 class="card-title">Alert Settings</h4>
                                            </div>
                                            <div class="card-body">
                                                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label class="form-label mb-0 mt-2">Passport Expiry
                                                                Alerts(In Days)</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <input type="number" class="form-control"
                                                                placeholder="Passport Expiry Alert"
                                                                value="{{company_details.passport_expiry_alert | default('0')}}"
                                                                name="passport_expiry_alert">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label class="form-label mb-0 mt-2">Emirates Expiry
                                                                Alerts(In Days)</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <input type="number" class="form-control"
                                                                placeholder="Passport Expiry Alert"
                                                                value="{{company_details.emirates_expiry_alert | default('0')}}"
                                                                name="emirates_expiry_alert">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label class="form-label mb-0 mt-2">Visa Expiry Alerts(In
                                                                Days)</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <input type="number" class="form-control"
                                                                placeholder="Visa Expiry Alert"
                                                                value="{{company_details.visa_expiry_alert | default('0')}}"
                                                                name="visa_expiry_alert">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label class="form-label mb-0 mt-2">Labour Contract Expiry
                                                                Alerts(In
                                                                Days)</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <input type="number" class="form-control"
                                                                placeholder="Labour Contract Expiry Alert"
                                                                value="{{company_details.labour_expiry_alert | default('0')}}"
                                                                name="labour_expiry_alert">
                                                        </div>
                                                    </div>
                                                </div>
                                                <!-- <div class="form-group">
                                                        <div class="row">
                                                            <div class="col-md-3">
                                                                <label class="form-label mb-0 mt-2">Offer Letter Expiry Alerts(In Days)</label>
                                                            </div>
                                                            <div class="col-md-9">
                                                                <input type="number" class="form-control" placeholder="Offer Letter Expiry Alert"
                                                                    value="{{company_details.offer_expiry_alert | default('0')}}" name="offer_expiry_alert">
                                                            </div>
                                                        </div>
                                                    </div> -->
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label class="form-label mb-0 mt-2">Other Documents Expiry
                                                                Alerts(In
                                                                Days)</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <input type="number" class="form-control"
                                                                placeholder="Other Document Expiry Alert"
                                                                value="{{company_details.other_expiry_alert | default('0')}}"
                                                                name="other_expiry_alert">
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="card-footer">
                                                <!-- <a  href="javascript:void(0);" class="btn btn-success">Save Changes</a> -->
                                                <button class="btn btn-success">Save Changes</button>
                                                <a href="javascript:void(0);" class="btn btn-danger">Cancel</a>
                                            </div>
                                        </div>
                                    </form>
                                </li>
                                <!-- Section 2 Leave Policies -->
                                <li>
                                    <div class="card-header  border-0">
                                        <h3>Alert Receivers</h3>
                                    </div>
                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <p>Set up different alert receivers for the company and specify the
                                                receiver's emails using commas to separate different users.</p>
                                            <form class="pt-3" method="POST" action="/update/emailreceivers/"
                                                enctype="multipart/form-data">
                                                <div class="card">
                                                    <div class="card-header  border-0">
                                                        <h4 class="card-title">Document Expiry Alert Receivers</h4>
                                                    </div>
                                                    <div class="card-body">
                                                        <input type="hidden" name="csrf_token"
                                                            value="{{ csrf_token() }}" />
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-3">
                                                                    <label class="form-label mb-0 mt-2">Receiver
                                                                        Email</label>
                                                                </div>
                                                                <div class="col-md-9">
                                                                    <textarea class="form-control mb-4"
                                                                        placeholder="Receiver Emails"
                                                                        name="receiver_emails"
                                                                        rows="3">{{company_details.receiver_emails}}</textarea>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="card-footer">
                                                        <!-- <a  href="javascript:void(0);" class="btn btn-success">Save Changes</a> -->
                                                        <button class="btn btn-success">Save Changes</button>
                                                        <a href="javascript:void(0);" class="btn btn-danger">Cancel</a>
                                                    </div>
                                                </div>
                                            </form>
                                        </div>

                                    </div>
                                </li>
                                <!-- Section 2 End -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!--End Row-->
        </div>

        <div class="tab-pane fade" id="tab-4" role="tabpanel">
            <!--Row-->
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header border-bottom-0">
                            <h3 class="card-title ">Leave & Time Settings</h3>
                        </div>
                        <div class="card-body">
                            <!-- Accordion begin -->
                            <ul class="demo-accordion accordionjs m-0" data-active-index="false">
                                <!-- Section 1 Leave Cycle -->
                                <li>
                                    <div class="card-header  border-0">
                                        <h3>Leave Cycle</h3>
                                    </div>
                                    <form class="card-body pt-3" method="POST" action="/update/leavecycle/"
                                        id="leave_cycle_form">
                                        <input type="hidden" name="csrf_token" id="csrf_leave_cycle"
                                            value="{{ csrf_token() }}" />
                                        <div class="card">
                                            <div class="card-body">
                                                <p>Setup Leave Cycle: A leave cycle is the 12 month period in which time
                                                    off
                                                    (vacation leave or any other type of leave) is calculated and
                                                    granted to
                                                    employees in accordance with their employment contract.</p>
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label class="form-label mb-0 mt-2">Select Leave
                                                                        Cycle
                                                                    </label>
                                                                </div>
                                                                <div class="col-md-6">
                                                                    <select class="form-control" id="leave_cycle"
                                                                        name="leave_cycle" required>
                                                                        <option label="Select" selected></option>
                                                                        <option value="calendar_year_cycle" {{'selected'
                                                                            if
                                                                            company_details.leave_cycle=='calendar_year_cycle'
                                                                            else '' }}>
                                                                            Calendar Year</option>
                                                                        <option value="individual_cycle" {{'selected' if
                                                                            company_details.leave_cycle=='individual_cycle'
                                                                            else '' }}>
                                                                            Individual Cycle</option>
                                                                        <!-- <option value="custom_cycle"
                                                                            {{'selected' if company_details.leave_cycle == 'custom_cycle' else '' }}>
                                                                            Custom Cycle</option> -->
                                                                    </select>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="row {{'' if company_details.leave_cycle == 'custom_cycle' else 'd-none'}}"
                                                    id="daterange_div">
                                                    <div class="col-md-6">
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label class="form-label">Date Range:</label>
                                                                </div>
                                                                <div class="col-md-6">
                                                                    <div class="input-group">
                                                                        {% if company_details.leave_cycle_start_date %}
                                                                        <input type="text" name="daterange"
                                                                            class="form-control"
                                                                            placeholder="Select Dates" id="dt_range"
                                                                            value="{{(company_details.leave_cycle_start_date.strftime('%B %d') if company_details.leave_cycle_start_date else '-')+ ' - ' +(company_details.leave_cycle_end_date.strftime('%B %d') if company_details.leave_cycle_end_date else '-')}}" />
                                                                        {% else %}
                                                                        <input type="text" name="daterange"
                                                                            class="form-control"
                                                                            placeholder="Select Dates" id="dt_range"
                                                                            value="" />

                                                                        {% endif %}
                                                                        <!-- <input type="text" name="daterange" class="form-control"
                                                                                    placeholder="select dates" id="dt_range"
                                                                                    value="{{(company_details.leave_cycle_start_date.strftime('%B %d') if company_details.leave_cycle_start_date else '-')+ ' - ' +(company_details.leave_cycle_end_date.strftime('%B %d') if company_details.leave_cycle_end_date else '-')}}"/> -->
                                                                        <div class="input-group-append">
                                                                            <div class="input-group-text">
                                                                                <i class="bx bx-calendar"></i>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card-footer">
                                                <button class="btn btn-success">Save Changes</button>
                                                <a href="javascript:void(0);" class="btn btn-danger">Cancel</a>
                                            </div>
                                        </div>
                                    </form>
                                </li>
                                <!-- Section 2 Leave Policies -->
                                <li>
                                    <div class="card-header  border-0">
                                        <h3>Leave Policies</h3>
                                    </div>
                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <p>Setup different Leave Policies for the company such as Vacation,Sick
                                                Leave,Maternity etc..</p>
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header  border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#addleavepolicymodal">Add
                                                                New</a>
                                                        </div>
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">
                                                                {% if company_details.leave_policies %}
                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                    id="leavepolicy-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0 w-5">Policy Name
                                                                            </th>
                                                                            <th class="border-bottom-0">Allowance Days
                                                                            </th>
                                                                            <th class="border-bottom-0">Allowance Type
                                                                            </th>
                                                                            <th class="border-bottom-0">Leave Type</th>
                                                                            <th class="border-bottom-0">Allow on
                                                                                Probation
                                                                            </th>
                                                                            <th class="border-bottom-0">Actions</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% for item in company_details.leave_policies %}
                                                                        <tr>
                                                                            <td>{{item.leave_policy_name}}</td>
                                                                            <td>
                                                                                {% if item.allowance_type == "onetime"
                                                                                %}
                                                                                {{item.non_probabtion_allowance_days}}
                                                                                (Non Probation) /
                                                                                {{item.probabtion_allowance_days}}
                                                                                (Probation)
                                                                                {% else %}
                                                                                {{item.allowance_days}}
                                                                                {% endif %}
                                                                            </td>
                                                                            <td>
                                                                                {% if item.allowance_type == "onetime"
                                                                                %}
                                                                                Monthly
                                                                                {% else %}
                                                                                Annual
                                                                                {% endif %}
                                                                            </td>
                                                                            <td>{{item.leave_type}}
                                                                            </td>
                                                                            <td>{{item.allow_on_probation}}
                                                                            </td>
                                                                            <td>
                                                                                <a class="btn btn-primary btn-icon btn-sm"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-target="#editleavepolicymodal"
                                                                                    data-leave_policy_name="{{item.leave_policy_name}}"
                                                                                    data-allowance_days="{{item.allowance_days}}"
                                                                                    data-allowance_type="{{item.allowance_type}}"
                                                                                    data-leave_type="{{item.leave_type}}"
                                                                                    data-allow_on_probation="{{item.allow_on_probation}}"
                                                                                    data-id="{{item._id}}">
                                                                                    <i class="feather feather-edit"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Edit"></i>
                                                                                </a>
                                                                                <a class="btn btn-danger btn-icon btn-sm btnDelleavepolicy"
                                                                                    data-bs-toggle="tooltip"
                                                                                    data-original-title="Delete"
                                                                                    data-id="{{item._id}}"
                                                                                    href="javascript:void(0)"><i
                                                                                        class="feather feather-trash-2"></i></a>
                                                                            </td>
                                                                        </tr>
                                                                        {%endfor%}
                                                                    </tbody>
                                                                </table>
                                                                {% else %}
                                                                <div class="expanel expanel-default mt-4">
                                                                    <div class="expanel-body">
                                                                        No Leave Policies Added.
                                                                    </div>
                                                                </div>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li>
                                <!-- Section 2 End -->

                                <!-- Section 3 Air ticket Policies -->
                                <!-- <li>
                                    <div class="card-header  border-0">
                                        <h3>Air Ticket Policies</h3>
                                    </div>
                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <p>Setup different Air Ticket Policies for the company.</p>
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header  border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#addairticketpolicymodal">Add
                                                                New</a>
                                                        </div>
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">
                                                                {% if company_details.leave_policies %}
                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                    id="leavepolicy-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0 w-5">Policy Name
                                                                            </th>
                                                                            <th class="border-bottom-0">Allowance Days
                                                                            </th>
                                                                            <th class="border-bottom-0">Allowance Type
                                                                            </th>
                                                                            <th class="border-bottom-0">Leave Type</th>
                                                                            <th class="border-bottom-0">Allow on Probation
                                                                            </th>
                                                                            <th class="border-bottom-0">Actions</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% for item in company_details.leave_policies %}
                                                                        <tr>
                                                                            <td>{{item.leave_policy_name}}</td>
                                                                            <td>
                                                                                {% if item.allowance_type == "onetime" %}
                                                                                    {{item.non_probabtion_allowance_days}} (Non Probation) / {{item.probabtion_allowance_days}} (Probation)
                                                                                {% else %}
                                                                                    {{item.allowance_days}}
                                                                                {% endif %}
                                                                            </td>
                                                                            <td>
                                                                                {% if item.allowance_type == "onetime" %}
                                                                                    Monthly
                                                                                {% else %}
                                                                                    Annual
                                                                                {% endif %}
                                                                            </td>
                                                                            <td>{{item.leave_type}}
                                                                            </td>
                                                                            <td>{{item.allow_on_probation}}
                                                                            </td>
                                                                            <td>
                                                                                <a class="btn btn-primary btn-icon btn-sm"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-target="#editleavepolicymodal"
                                                                                    data-leave_policy_name="{{item.leave_policy_name}}"
                                                                                    data-allowance_days="{{item.allowance_days}}"
                                                                                    data-allowance_type="{{item.allowance_type}}"
                                                                                    data-leave_type="{{item.leave_type}}"
                                                                                    data-allow_on_probation="{{item.allow_on_probation}}"
                                                                                    data-id="{{item._id}}">
                                                                                    <i class="feather feather-edit"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Edit"></i>
                                                                                </a>
                                                                                <a class="btn btn-danger btn-icon btn-sm btnDelleavepolicy"
                                                                                    data-bs-toggle="tooltip"
                                                                                    data-original-title="Delete"
                                                                                    data-id="{{item._id}}"
                                                                                    href="javascript:void(0)"><i
                                                                                        class="feather feather-trash-2"></i></a>
                                                                            </td>
                                                                        </tr>
                                                                        {%endfor%}
                                                                    </tbody>
                                                                </table>
                                                                {% else %}
                                                                <div class="expanel expanel-default mt-4">
                                                                    <div class="expanel-body">
                                                                        No Leave Policies Added.
                                                                    </div>
                                                                </div>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li>
                                <!-- Section 2 End -->

                                <!-- Section 3 Air ticket Policies -->
                                <!-- <li>
                                    <div class="card-header  border-0">
                                        <h3>Air Ticket Policies</h3>
                                    </div>
                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <p>Setup different Air Ticket Policies for the company.</p>
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header  border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#addairticketpolicymodal">Add
                                                                New</a>
                                                        </div>
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">
                                                                {% if company_details.leave_policies %}
                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                    id="leavepolicy-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0 w-5">Policy Name
                                                                            </th>
                                                                            <th class="border-bottom-0">Allowance Days
                                                                            </th>
                                                                            <th class="border-bottom-0">Allowance Type
                                                                            </th>
                                                                            <th class="border-bottom-0">Leave Type</th>
                                                                            <th class="border-bottom-0">Allow on Probation
                                                                            </th>
                                                                            <th class="border-bottom-0">Actions</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% for item in company_details.leave_policies %}
                                                                        <tr>
                                                                            <td>{{item.leave_policy_name}}</td>
                                                                            <td>{{item.allowance_days}}
                                                                            </td>
                                                                            <td>{{item.allowance_type}}
                                                                            </td>
                                                                            <td>{{item.leave_type}}
                                                                            </td>
                                                                            <td>{{item.allow_on_probation}}
                                                                            </td>
                                                                            <td>
                                                                                <a class="btn btn-primary btn-icon btn-sm"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-target="#editleavepolicymodal"
                                                                                    data-leave_policy_name="{{item.leave_policy_name}}"
                                                                                    data-allowance_days="{{item.allowance_days}}"
                                                                                    data-allowance_type="{{item.allowance_type}}"
                                                                                    data-leave_type="{{item.leave_type}}"
                                                                                    data-allow_on_probation="{{item.allow_on_probation}}"
                                                                                    data-id="{{item._id}}">
                                                                                    <i class="feather feather-edit"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Edit"></i>
                                                                                </a>
                                                                                <a class="btn btn-danger btn-icon btn-sm btnDelleavepolicy"
                                                                                    data-bs-toggle="tooltip"
                                                                                    data-original-title="Delete"
                                                                                    data-id="{{item._id}}"
                                                                                    href="javascript:void(0)"><i
                                                                                        class="feather feather-trash-2"></i></a>
                                                                            </td>
                                                                        </tr>
                                                                        {%endfor%}
                                                                    </tbody>
                                                                </table>
                                                                {% else %}
                                                                <div class="expanel expanel-default mt-4">
                                                                    <div class="expanel-body">
                                                                        No Leave Policies Added.
                                                                    </div>
                                                                </div>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li> -->
                                <!-- Section 2 End -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!--End Row-->
        </div>

        <div class="tab-pane fade" id="tab-5" role="tabpanel">

            <!--Row-->
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header border-bottom-0">
                            <h3 class="card-title ">Attendance Settings</h3>
                        </div>
                        <div class="card-body">
                            <!-- Accordion begin -->
                            <ul class="demo-accordion accordionjs m-0" data-active-index="false">

                                <!-- Section 1 General Settings -->
                                <li>
                                    <div class="card-header  border-0">
                                        <h3>Working Days</h3>
                                    </div>
                                    <form class="card-body pt-3" id="gen_settings_form">
                                        <input type="hidden" name="csrf_token" id="csrf_gen"
                                            value="{{ csrf_token() }}" />
                                        <div class="card">
                                            <div class="card-body">
                                                <p>Setup Working Days in a Calendar Month & Daily Working Hours to
                                                    calculate
                                                    the appropriate attendance data of your employees.</p>
                                                <div class="row">
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label class="form-label mb-0 mt-2">January</label>
                                                                </div>
                                                                {% set data =
                                                                company_details.working_days|selectattr('month','equalto','january')|list
                                                                %}
                                                                <div class="col-md-6">
                                                                    <input type="number" class="form-control"
                                                                        placeholder="Total Working Days In Calendar Month"
                                                                        name="january"
                                                                        value="{{data[0].days if data else ''}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label class="form-label mb-0 mt-2">February</label>
                                                                </div>
                                                                {% set data =
                                                                company_details.working_days|selectattr('month','equalto','february')|list
                                                                %}
                                                                <div class="col-md-6">
                                                                    <input type="number" class="form-control"
                                                                        placeholder="Total Working Days In Calendar Month"
                                                                        name="february"
                                                                        value="{{data[0].days if data else ''}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label class="form-label mb-0 mt-2">March</label>
                                                                </div>
                                                                {% set data =
                                                                company_details.working_days|selectattr('month','equalto','march')|list
                                                                %}
                                                                <div class="col-md-6">
                                                                    <input type="number" class="form-control"
                                                                        placeholder="Total Working Days In Calendar Month"
                                                                        name="march"
                                                                        value="{{data[0].days if data else ''}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label class="form-label mb-0 mt-2">April</label>
                                                                </div>
                                                                {% set data =
                                                                company_details.working_days|selectattr('month','equalto','april')|list
                                                                %}
                                                                <div class="col-md-6">
                                                                    <input type="number" class="form-control"
                                                                        placeholder="Total Working Days In Calendar Month"
                                                                        name="april"
                                                                        value="{{data[0].days if data else ''}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label class="form-label mb-0 mt-2">May</label>
                                                                </div>
                                                                {% set data =
                                                                company_details.working_days|selectattr('month','equalto','may')|list
                                                                %}
                                                                <div class="col-md-6">
                                                                    <input type="number" class="form-control"
                                                                        placeholder="Total Working Days In Calendar Month"
                                                                        name="may"
                                                                        value="{{data[0].days if data else ''}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label class="form-label mb-0 mt-2">June</label>
                                                                </div>
                                                                {% set data =
                                                                company_details.working_days|selectattr('month','equalto','june')|list
                                                                %}
                                                                <div class="col-md-6">
                                                                    <input type="number" class="form-control"
                                                                        placeholder="Total Working Days In Calendar Month"
                                                                        name="june"
                                                                        value="{{data[0].days if data else ''}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label class="form-label mb-0 mt-2">July</label>
                                                                </div>
                                                                {% set data =
                                                                company_details.working_days|selectattr('month','equalto','july')|list
                                                                %}
                                                                <div class="col-md-6">
                                                                    <input type="number" class="form-control"
                                                                        placeholder="Total Working Days In Calendar Month"
                                                                        name="july"
                                                                        value="{{data[0].days if data else ''}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label class="form-label mb-0 mt-2">August</label>
                                                                </div>
                                                                {% set data =
                                                                company_details.working_days|selectattr('month','equalto','august')|list
                                                                %}
                                                                <div class="col-md-6">
                                                                    <input type="number" class="form-control"
                                                                        placeholder="Total Working Days In Calendar Month"
                                                                        name="august"
                                                                        value="{{data[0].days if data else ''}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label
                                                                        class="form-label mb-0 mt-2">September</label>
                                                                </div>
                                                                {% set data =
                                                                company_details.working_days|selectattr('month','equalto','september')|list
                                                                %}
                                                                <div class="col-md-6">
                                                                    <input type="number" class="form-control"
                                                                        placeholder="Total Working Days In Calendar Month"
                                                                        name="september"
                                                                        value="{{data[0].days if data else ''}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label class="form-label mb-0 mt-2">October</label>
                                                                </div>
                                                                {% set data =
                                                                company_details.working_days|selectattr('month','equalto','october')|list
                                                                %}
                                                                <div class="col-md-6">
                                                                    <input type="number" class="form-control"
                                                                        placeholder="Total Working Days In Calendar Month"
                                                                        name="october"
                                                                        value="{{data[0].days if data else ''}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label class="form-label mb-0 mt-2">November</label>
                                                                </div>
                                                                {% set data =
                                                                company_details.working_days|selectattr('month','equalto','november')|list
                                                                %}
                                                                <div class="col-md-6">
                                                                    <input type="number" class="form-control"
                                                                        placeholder="Total Working Days In Calendar Month"
                                                                        name="november"
                                                                        value="{{data[0].days if data else ''}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <div class="form-group">
                                                            <div class="row">
                                                                <div class="col-md-6">
                                                                    <label class="form-label mb-0 mt-2">December</label>
                                                                </div>
                                                                {% set data =
                                                                company_details.working_days|selectattr('month','equalto','december')|list
                                                                %}
                                                                <div class="col-md-6">
                                                                    <input type="number" class="form-control"
                                                                        placeholder="Total Working Days In Calendar Month"
                                                                        name="december"
                                                                        value="{{data[0].days if data else ''}}">
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="row">
                                                        <div class="col-md-3">
                                                            <label class="form-label mb-0 mt-2">Daily Working
                                                                Hours</label>
                                                        </div>
                                                        <div class="col-md-9">
                                                            <input type="number" class="form-control"
                                                                placeholder="Total Working Days In Calendar Month"
                                                                name="working_hour" step="any"
                                                                value="{{company_details.daily_working_hour}}">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card-footer">
                                                <a href="#" class="btn btn-success btnGenSettings">Save Changes</a>
                                                <a href="javascript:void(0);" class="btn btn-danger">Cancel</a>
                                            </div>
                                        </div>
                                    </form>
                                </li>
                                <!-- Section 2 Work Timings -->
                                <li>
                                    <div class="card-header  border-0">
                                        <h3>Work Timings</h3>
                                    </div>
                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <p>Setup Work timings to define the appropriate timings for your employees
                                                to be at office.</p>
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header  border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#addworktimingmodal">Add
                                                                New</a>
                                                        </div>
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">
                                                                {% if company_details.worktimings %}
                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                    id="worktimings-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0 w-5">Name
                                                                            </th>
                                                                            <th class="border-bottom-0">Working Hour
                                                                            </th>
                                                                            <th class="border-bottom-0">Late Arrival
                                                                            </th>
                                                                            <th class="border-bottom-0">Early
                                                                                Departure</th>
                                                                            <th class="border-bottom-0">Absent After
                                                                            </th>
                                                                            <th class="border-bottom-0">Actions</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% for item in company_details.worktimings %}
                                                                        <tr>

                                                                            <td><span class="badge"
                                                                                    style="color:{{item.schedule_color}}">{{item.name}}</span>
                                                                            </td>
                                                                            <td>{{'NA' if item.is_day_off else
                                                                                item.office_start_at + ' - ' +
                                                                                item.office_end_at}}
                                                                            </td>
                                                                            <td>{{'NA' if item.is_day_off else
                                                                                item.late_arrival_later_than |
                                                                                default('NA') + ' Minutes'}}
                                                                            </td>
                                                                            <td>{{'NA' if item.is_day_off else
                                                                                item.early_departure_earliar_than+ '
                                                                                Minutes'}}
                                                                            </td>
                                                                            <td>{{'NA' if item.is_day_off else
                                                                                item.consider_absent_after+ ' Minutes'}}
                                                                            </td>
                                                                            <td>
                                                                                <a class="btn btn-primary btn-icon btn-sm"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-target="#editworkmodal"
                                                                                    data-schedule_name="{{item.name}}"
                                                                                    data-schedule_color="{{item.schedule_color}}"
                                                                                    data-office_start_at="{{item.office_start_at}}"
                                                                                    data-office_end_at="{{item.office_end_at}}"
                                                                                    data-is_day_off="{{item.is_day_off}}"
                                                                                    data-late_arrival__later_than="{{item.late_arrival_later_than}}"
                                                                                    data-early_departure_earliar_than="{{item.early_departure_earliar_than}}"
                                                                                    data-consider_absent_after="{{item.consider_absent_after}}"
                                                                                    data-week_offs="{{item.week_offs}}"
                                                                                    data-is_default="{{item.is_default}}"
                                                                                    data-minimum_ot="{{item.minimum_ot}}"
                                                                                    data-id="{{item._id}}">
                                                                                    <i class="feather feather-edit"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Edit"></i>
                                                                                </a>
                                                                                <a class="btn btn-danger btn-icon btn-sm btnDelWorktimings"
                                                                                    data-bs-toggle="tooltip"
                                                                                    data-original-title="Delete"
                                                                                    data-id="{{item._id}}"
                                                                                    href="javascript:void(0)"><i
                                                                                        class="feather feather-trash-2"></i></a>
                                                                            </td>
                                                                        </tr>
                                                                        {%endfor%}
                                                                    </tbody>
                                                                </table>
                                                                {% else %}
                                                                <div class="expanel expanel-default mt-4">
                                                                    <div class="expanel-body">
                                                                        No Work timings Added.
                                                                    </div>
                                                                </div>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li>

                                <!-- Section 3 Overtime -->
                                <li>
                                    <div class="card-header  border-0">
                                        <h3>Overtime Policies</h3>
                                    </div>
                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <p>Setup Overtime Policies to define the appropriate overtime rates for your
                                                employees.</p>
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header  border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#addovertimemodal">Add
                                                                New</a>
                                                        </div>
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">
                                                                {% if company_details.overtime_policies %}
                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                    id="overtime-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0 w-5">Policy type
                                                                            </th>
                                                                            <th class="border-bottom-0">Overtime
                                                                                Multiplier
                                                                            </th>
                                                                            <th class="border-bottom-0"
                                                                                data-bs-placement="top"
                                                                                data-bs-toggle="tooltip"
                                                                                title="Overtime on Basic Salary + Allowances">
                                                                                Overtime On
                                                                            </th>
                                                                            <th class="border-bottom-0">Actions</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% for item in company_details.overtime_policies
                                                                        %}
                                                                        <tr>

                                                                            <td>{{item.ot_policy_name}}</td>
                                                                            <td>{{item.ot_policy_multiplier}}</td>
                                                                            <td>{{item.ot_policy_on}}</td>

                                                                            <td>
                                                                                <a class="btn btn-primary btn-icon btn-sm"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-target="#editovertimemodal"
                                                                                    data-ot_policy_name="{{item.ot_policy_name}}"
                                                                                    data-ot_policy_multiplier="{{item.ot_policy_multiplier}}"
                                                                                    data-ot_policy_on="{{item.ot_policy_on}}"
                                                                                    data-id="{{item._id}}">
                                                                                    <i class="feather feather-edit"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Edit"></i>
                                                                                </a>
                                                                                <a class="btn btn-danger btn-icon btn-sm btnDelWorktimings"
                                                                                    data-bs-toggle="tooltip"
                                                                                    data-original-title="Delete"
                                                                                    data-id="{{item._id}}"
                                                                                    href="javascript:void(0)"><i
                                                                                        class="feather feather-trash-2"></i></a>
                                                                            </td>
                                                                        </tr>
                                                                        {%endfor%}
                                                                    </tbody>
                                                                </table>
                                                                {% else %}
                                                                <div class="expanel expanel-default mt-4">
                                                                    <div class="expanel-body">
                                                                        No Overtime Policies Added.
                                                                    </div>
                                                                </div>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li>

                                <!-- Section 4 Offices -->
                                <li>
                                    <div class="card-header  border-0">
                                        <h3>Offices</h3>
                                    </div>
                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <p>Adding a new office location data so that employees can clock-in and
                                                clock-out.</p>
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header  border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#addofficesmodal">Add
                                                                New</a>
                                                        </div>
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">
                                                                {% if company_details.worktimings %}
                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                    id="offices-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0 w-5">Office Name
                                                                            </th>
                                                                            <th class="border-bottom-0">Location Name
                                                                            </th>
                                                                            <th class="border-bottom-0">Attendance
                                                                                Radius(In
                                                                                Meters)
                                                                            </th>
                                                                            <th class="border-bottom-0">Actions</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% for item in company_details.offices %}
                                                                        <tr>

                                                                            <td>{{item.office_name}}</td>
                                                                            <td>{{item.location_name}}
                                                                            </td>
                                                                            <td>{{item.location_radius }}
                                                                            </td>
                                                                            <td>
                                                                                <a class="btn btn-primary btn-icon btn-sm"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-target="#editworkmodal"
                                                                                    data-id="{{item._id}}">
                                                                                    <i class="feather feather-edit"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Edit"></i>
                                                                                </a>
                                                                                <!-- <a class="btn btn-danger btn-icon btn-sm btnDelWorktimings"
                                                                                    data-bs-toggle="tooltip"
                                                                                    data-original-title="Delete"
                                                                                    data-id="{{item._id}}"
                                                                                    href="javascript:void(0)"><i
                                                                                        class="feather feather-trash-2"></i></a> -->
                                                                            </td>
                                                                        </tr>
                                                                        {%endfor%}
                                                                    </tbody>
                                                                </table>
                                                                {% else %}
                                                                <div class="expanel expanel-default mt-4">
                                                                    <div class="expanel-body">
                                                                        No Offices Added.
                                                                    </div>
                                                                </div>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li>

                                <!-- Section 5 Clock In Configs -->
                                <li>
                                    <div class="card-header  border-0">
                                        <h3>Clock-in Options</h3>
                                    </div>

                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <p>Add Clock-ins options, this will be the options for the employees to
                                                select
                                                while Clocking In.</p>
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header  border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#addclockinoptionsmodal">Add
                                                                New</a>
                                                        </div>
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">

                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                    id="cin-opt-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0">Clock-in From
                                                                            </th>
                                                                            <th class="border-bottom-0">Outside Office
                                                                            </th>
                                                                            <th class="border-bottom-0">Actions</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% if
                                                                        company_details.clock_in_options|list|length >0
                                                                        %}
                                                                        {% for item in
                                                                        company_details.clock_in_options%}
                                                                        <tr>

                                                                            <td>{{item.clock_in_from}}</td>
                                                                            <td>{{item.outside_office}}</td>

                                                                            <td>
                                                                                <a class="btn btn-primary btn-icon btn-sm"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-target="#"
                                                                                    data-ot_policy_name="{{item.clock_in_from}}"
                                                                                    data-id="{{item._id}}">
                                                                                    <i class="feather feather-edit"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Edit"></i>
                                                                                </a>
                                                                                <!-- <a class="btn btn-danger btn-icon btn-sm btnDelWorktimings"
                                                                                    data-bs-toggle="tooltip"
                                                                                    data-original-title="Delete"
                                                                                    data-id="{{item._id}}"
                                                                                    href="javascript:void(0)"><i
                                                                                        class="feather feather-trash-2"></i></a> -->
                                                                            </td>
                                                                        </tr>
                                                                        {%endfor%}
                                                                        {% else %}
                                                                        <div
                                                                            class="expanel expanel-default mt-4 cin-expanel">
                                                                            <div class="expanel-body">
                                                                                No Clock-in Options added yet.
                                                                            </div>
                                                                        </div>
                                                                        {% endif %}
                                                                    </tbody>
                                                                </table>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li>
                                <!-- Section 3 -->
                                <!-- <li>
                                    <div class="card-header  border-0">
                                        <h3>Work Centers for Shifting Schedule</h3>
                                    </div>
                                    <div class="card">
                                        <p>Create work centers for your employees. This will allow to schedule
                                            shifts for employees in their centers.</p>
                                        <div class="card-body pt-0">
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header  border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#addworkcentermodal">Add
                                                                New</a>
                                                        </div>
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">
                                                                {% if departments.departments %}
                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom"
                                                                    id="hr-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0 w-5">Work
                                                                                Center
                                                                            </th>
                                                                            <th class="border-bottom-0">Working
                                                                                Timings
                                                                            </th>
                                                                            <th class="border-bottom-0">Offices
                                                                            </th>
                                                                            <th class="border-bottom-0">Employees(#)
                                                                            </th>
                                                                            <th class="border-bottom-0">Actions</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        <tr>

                                                                            <td>Default</td>
                                                                            <td>Default</td>
                                                                            <td>Default Branch</td>
                                                                            <td>No of Employees</td>
                                                                            <td>
                                                                                <button
                                                                                    class="btn btn-primary dropdown-toggle"
                                                                                    data-bs-toggle="dropdown">
                                                                                    Action
                                                                                </button>
                                                                                <div class="dropdown-menu">
                                                                                    <a class="dropdown-item"
                                                                                        href="javascript:void(0)">Edit
                                                                                        Center</a>
                                                                                    <a class="dropdown-item"
                                                                                        href="javascript:void(0)">Edit
                                                                                        Employees</a>
                                                                                    <a class="dropdown-item"
                                                                                        href="javascript:void(0)">Delete
                                                                                        Center</a>
                                                                                </div>
                                                                            </td>
                                                                        </tr>
                                                                    </tbody>
                                                                </table>
                                                                {% else %}
                                                                <div class="expanel expanel-default mt-4">
                                                                    <div class="expanel-body">
                                                                        No Departments Added.
                                                                    </div>
                                                                </div>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li> -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!--End Row-->
        </div>

        <div class="tab-pane fade" id="tab-6" role="tabpanel">

            <!--Row-->
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header border-bottom-0">
                            <h3 class="card-title ">Payroll Settings</h3>
                        </div>
                        <div class="card-body">
                            <!-- Accordion begin -->
                            <ul class="demo-accordion accordionjs m-0" data-active-index="false">
                                <!-- Section 1 -->
                                <li class="acc_active">
                                    <div class="card-header  border-0">
                                        <h3>Addition Reasons</h3>
                                    </div>
                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <p>Setup Addition Reasons to define the appropriate Adjustments.</p>
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header  border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#addadditionmodal">Add
                                                                New</a>
                                                        </div>
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">
                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                    id="addition-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0">Addition Reason
                                                                            </th>
                                                                            <th class="border-bottom-0">Actions</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% if
                                                                        company_details.adjustment_reasons|selectattr('adjustment_type','equalto','addition')|list|length
                                                                        >0 %}

                                                                        {% for item in
                                                                        company_details.adjustment_reasons|selectattr('adjustment_type','equalto','addition')
                                                                        %}
                                                                        <tr>

                                                                            <td>{{item.adjustment_reason}}</td>

                                                                            <td>
                                                                                <a class="btn btn-primary btn-icon btn-sm"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-target="#"
                                                                                    data-ot_policy_name="{{item.adjustment_reason}}"
                                                                                    data-id="{{item._id}}">
                                                                                    <i class="feather feather-edit"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Edit"></i>
                                                                                </a>
                                                                                <!-- <a class="btn btn-danger btn-icon btn-sm btnDelWorktimings"
                                                                                    data-bs-toggle="tooltip"
                                                                                    data-original-title="Delete"
                                                                                    data-id="{{item._id}}"
                                                                                    href="javascript:void(0)"><i
                                                                                        class="feather feather-trash-2"></i></a> -->
                                                                            </td>
                                                                        </tr>
                                                                        {%endfor%}
                                                                        {% else %}
                                                                        <div
                                                                            class="expanel expanel-default mt-4 add-expanel">
                                                                            <div class="expanel-body">
                                                                                No Addition Reasons Added.
                                                                            </div>
                                                                        </div>
                                                                        {% endif %}
                                                                    </tbody>
                                                                </table>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li>
                                <!-- Section 1 -->
                                <!-- Section 2 -->
                                <li>
                                    <div class="card-header  border-0">
                                        <h3>Deduction Reasons</h3>
                                    </div>
                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <p>Setup Deduction Reasons to define the appropriate Adjustments.</p>
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header  border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#adddeductionmodal">Add
                                                                New</a>
                                                        </div>
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">

                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                    id="deduction-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0">Deduction Reason
                                                                            </th>
                                                                            <th class="border-bottom-0">Actions</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% if
                                                                        company_details.adjustment_reasons|selectattr('adjustment_type','equalto','deduction')|list|length
                                                                        >0 %}
                                                                        {% for item in
                                                                        company_details.adjustment_reasons|selectattr('adjustment_type','equalto','deduction')
                                                                        %}
                                                                        <tr>

                                                                            <td>{{item.adjustment_reason}}</td>

                                                                            <td>
                                                                                <a class="btn btn-primary btn-icon btn-sm"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-target="#"
                                                                                    data-ot_policy_name="{{item.adjustment_reason}}"
                                                                                    data-id="{{item._id}}">
                                                                                    <i class="feather feather-edit"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Edit"></i>
                                                                                </a>
                                                                                <!-- <a class="btn btn-danger btn-icon btn-sm btnDelWorktimings"
                                                                                    data-bs-toggle="tooltip"
                                                                                    data-original-title="Delete"
                                                                                    data-id="{{item._id}}"
                                                                                    href="javascript:void(0)"><i
                                                                                        class="feather feather-trash-2"></i></a> -->
                                                                            </td>
                                                                        </tr>
                                                                        {%endfor%}
                                                                        {% else %}
                                                                        <div
                                                                            class="expanel expanel-default mt-4 ded-expanel">
                                                                            <div class="expanel-body">
                                                                                No Deduction Reasons Added.
                                                                            </div>
                                                                        </div>
                                                                        {% endif %}
                                                                    </tbody>
                                                                </table>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li>
                                <!-- Section 2 -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!--End Row-->
        </div>

        <div class="tab-pane fade" id="tab-7" role="tabpanel">

            <!--Row-->
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header border-bottom-0">
                            <h3 class="card-title ">Role Management</h3>
                        </div>
                        <div class="card-body">
                            <!-- Accordion begin -->
                            <ul class="demo-accordion accordionjs m-0" data-active-index="false">

                                <!-- Section 1 Leave Approval Level -->
                                <li>
                                    <div class="card-header  border-0">
                                        <h3>Leave Approvers</h3>
                                    </div>
                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <div class="row">
                                                <div class="col-xl-6 col-md-6 col-lg-6">
                                                    <p>Setup different Leave Approval level for the company based on
                                                        departments.</p>
                                                </div>
                                                <div class="col-xl-6 col-md-6 col-lg-6 text-end px-5">
                                                    <div class="form-group mb-0">
                                                        <label class="custom-switch">
                                                            <input type="checkbox" class="custom-switch-input"
                                                                name="disable_leave_application"
                                                                id="disable_leave_application" {% if
                                                                company_details.disable_leave_application %} checked {%
                                                                endif %}>
                                                            <span class="custom-switch-indicator"></span>
                                                            <span class="custom-switch-description">Disable Leave
                                                                Applications</span>
                                                        </label>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#addleaveapprovermodal">Add
                                                                New</a>
                                                        </div>
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">
                                                                {% if company_details.leave_approvers %}
                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                    id="leaveapprover-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0 w-5">Department
                                                                            </th>
                                                                            <th class="border-bottom-0">Approval Level
                                                                            </th>
                                                                            <th class="border-bottom-0">Approvers
                                                                            </th>
                                                                            <th class="border-bottom-0">Actions</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% for item in company_details.leave_approvers
                                                                        %}
                                                                        <tr>
                                                                            <td>{{item.department_name}}</td>
                                                                            <td>{{item.department_approval_level}}</td>
                                                                            <td>{% for subitem in item.approvers %}
                                                                                <span
                                                                                    class="badge badge-success-light fs-13">{{subitem.employee_details_id.first_name
                                                                                    + ' ' +
                                                                                    subitem.employee_details_id.last_name}}</span>
                                                                                {% endfor %}
                                                                            </td>
                                                                            <td>
                                                                                {% if item.can_delete %}
                                                                                <a class="btn btn-primary btn-icon btn-sm"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-target="#editleaveapprovermodal"
                                                                                    data-id="{{item._id}}" {% for
                                                                                    subitem in item.approvers %}
                                                                                    data-approver_{{loop.index}}="{{subitem.employee_details_id._id}}"
                                                                                    data-approver_{{loop.index}}_name="{{subitem.employee_details_id.first_name + ' ' + subitem.employee_details_id.last_name}}"
                                                                                    {% endfor %}
                                                                                    data-approval_level="{{item.department_approval_level}}"
                                                                                    data-department_name="{{item.department_name}}">
                                                                                    <i class="feather feather-edit"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Edit"></i>
                                                                                </a>
                                                                                <!-- <a class="btn btn-danger btn-icon btn-sm btnDelleavepolicy"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Delete"
                                                                                        data-id="{{item._id}}"
                                                                                        href="javascript:void(0)"><i
                                                                                            class="feather feather-trash-2"></i></a>     -->
                                                                                {% else %}
                                                                                <span class="feather feather-info"
                                                                                    data-bs-toggle="tooltip"
                                                                                    data-bs-placement="top"
                                                                                    title="Please approve/reject the {{item.pending_applications}} pending application(s), in order to make changes to the approver level."></span>
                                                                                {% endif %}
                                                                            </td>
                                                                        </tr>
                                                                        {%endfor%}
                                                                    </tbody>
                                                                </table>
                                                                {% else %}
                                                                <div class="expanel expanel-default mt-4">
                                                                    <div class="expanel-body">
                                                                        No Leave Approval Level Added.
                                                                    </div>
                                                                </div>
                                                                {% endif %}
                                                            </div>
                                                        </div>

                                                    </div>
                                                    <p>Assign Super approver role to employee. Super approvers have the
                                                        final decision in all leave applications (approval/denial). Once
                                                        a super approver have approved/denied the leave application - it
                                                        will be closed for further modifications</p>
                                                    <div class="row">
                                                        <div class="col-xl-12 col-md-12 col-lg-12">
                                                            <div class="card">
                                                                <div class="card-header  border-0">
                                                                    <a href="javascript:void(0);"
                                                                        class="btn btn-success me-3"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#assignsuperapprovermodal">Add
                                                                        Super Leave Approver</a>
                                                                </div>
                                                                <div class="card-body pt-1">
                                                                    <div class="table-responsive">
                                                                        <table
                                                                            class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                            id="addition-table">
                                                                            <thead>
                                                                                <tr>
                                                                                    <th class="border-bottom-0">Role
                                                                                    </th>
                                                                                    <th class="border-bottom-0">
                                                                                        Employees</th>
                                                                                </tr>
                                                                            </thead>
                                                                            <tbody>
                                                                                {% if
                                                                                company_details.super_leave_approvers|length
                                                                                >0 %}
                                                                                <tr>
                                                                                    <td> Super Leave Approver</td>
                                                                                    <td>
                                                                                        {% for item in
                                                                                        company_details.super_leave_approvers%}
                                                                                        <div class="tag me-1">
                                                                                            {{item.employee_details_id.first_name
                                                                                            + ' ' +
                                                                                            item.employee_details_id.last_name}}
                                                                                            <a href="javascript:void(0);"
                                                                                                class="tag-addon tag-danger"><i
                                                                                                    class="fe fe-trash-2"></i></a>
                                                                                        </div>
                                                                                        {% endfor %}
                                                                                    </td>
                                                                                </tr>
                                                                                {% else %}
                                                                                <div
                                                                                    class="expanel expanel-default mt-4 add-expanel">
                                                                                    <div class="expanel-body">
                                                                                        No Super Roles Added/Assigned.
                                                                                    </div>
                                                                                </div>
                                                                                {% endif %}
                                                                            </tbody>
                                                                        </table>

                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li>
                                <!-- Section 1 End -->

                                <!-- Section 2 Time Approval Level -->
                                <li>
                                    <div class="card-header  border-0">
                                        <h3>Time Approvers</h3>
                                    </div>
                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <div class="row">
                                                <div class="col-xl-9 col-md-6 col-lg-6">
                                                    <p>Setup different Time Approvers(Overtime/Late/Early Departure
                                                        Approvers) for the company based on departments.</p>
                                                </div>
                                                <!-- <div class="col-xl-3 col-md-6 col-lg-6 text-end px-5">
                                                    <div class="form-group mb-0">
                                                        <label class="custom-switch">
                                                            <input type="checkbox" class="custom-switch-input" name="disable_leave_application" id="disable_leave_application" {% if company_details.disable_leave_application %} checked {% endif %}>
                                                            <span class="custom-switch-indicator"></span>
                                                            <span class="custom-switch-description">Disable Leave Applications</span>
                                                        </label>
                                                    </div>
                                                </div> -->
                                            </div>
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#addtimeapprovermodal">Add
                                                                New</a>
                                                        </div>
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">
                                                                {% if company_details.leave_approvers %}
                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                    id="leaveapprover-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0 w-5">Department
                                                                            </th>
                                                                            <th class="border-bottom-0">Approver
                                                                            </th>
                                                                            <!-- <th class="border-bottom-0">Actions</th> -->
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% for item in company_details.time_approvers %}
                                                                        <tr>
                                                                            <td>{{item.department_name}}</td>
                                                                            <td>
                                                                                <span
                                                                                    class="badge badge-success-light fs-13">{{item.approver.first_name
                                                                                    + ' ' +
                                                                                    item.approver.last_name}}</span>
                                                                            </td>
                                                                            <!-- <td> -->
                                                                            <!-- {% if item.can_delete %}
                                                                                    <a class="btn btn-primary btn-icon btn-sm"
                                                                                        data-bs-toggle="modal"
                                                                                        data-bs-target="#editleaveapprovermodal"
                                                                                        data-id="{{item._id}}"
                                                                                        {% for subitem in item.approvers %}
                                                                                        data-approver_{{loop.index}}="{{subitem.employee_details_id._id}}"
                                                                                        data-approver_{{loop.index}}_name="{{subitem.employee_details_id.first_name + ' ' + subitem.employee_details_id.last_name}}"
                                                                                        {% endfor %}
                                                                                        data-approval_level="{{item.department_approval_level}}"
                                                                                        data-department_name="{{item.department_name}}"
                                                                                        >
                                                                                        <i class="feather feather-edit"
                                                                                            data-bs-toggle="tooltip"
                                                                                            data-original-title="Edit"></i>
                                                                                    </a> -->
                                                                            <!-- <a class="btn btn-danger btn-icon btn-sm btnDelleavepolicy"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Delete"
                                                                                        data-id="{{item._id}}"
                                                                                        href="javascript:void(0)"><i
                                                                                            class="feather feather-trash-2"></i></a>     -->
                                                                            <!-- {% else %}
                                                                                    <span class="feather feather-info" data-bs-toggle="tooltip" data-bs-placement="top" title="Please approve/reject the {{item.pending_applications}} pending application(s), in order to make changes to the approver level."></span>
                                                                                {% endif %} -->
                                                                            <!-- </td> -->
                                                                        </tr>
                                                                        {%endfor%}
                                                                    </tbody>
                                                                </table>
                                                                {% else %}
                                                                <div class="expanel expanel-default mt-4">
                                                                    <div class="expanel-body">
                                                                        No Time Approver Added.
                                                                    </div>
                                                                </div>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li>
                                <!-- Section 2 End -->
                                <!-- Section 3 -->
                                <li>
                                    <div class="card-header  border-0">
                                        <h3>Additional Roles</h3>
                                    </div>
                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <p>Assign additional roles to employee.</p>
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header  border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#assignrolesmodal">Assign Additional
                                                                Roles</a>
                                                        </div>
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">
                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                    id="addition-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0">Employee</th>
                                                                            <th class="border-bottom-0">Role</th>
                                                                            <!-- <th class="border-bottom-0">Actions</th> -->
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% if company_details.company_roles|length >0 %}

                                                                        {% for employee_details_id, items in
                                                                        company_details.company_roles|groupby('employee_details_id._id')
                                                                        %}
                                                                        <tr>

                                                                            <td>{{items[0].employee_details_id.first_name
                                                                                + ' ' +
                                                                                items[0].employee_details_id.last_name}}
                                                                            </td>
                                                                            <td>
                                                                                {% for item in items %}
                                                                                <div class="tag me-1">
                                                                                    {{item.role.name|upper}}
                                                                                    <a href="javascript:void(0);"
                                                                                        class="tag-addon tag-danger"><i
                                                                                            class="fe fe-trash-2"></i></a>
                                                                                </div>
                                                                                {% endfor %}
                                                                            </td>
                                                                            <!-- <td>
                                                                                    <a class="btn btn-danger btn-icon btn-sm btnDelRole"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Delete"
                                                                                        data-id="{{items._id}}"
                                                                                        href="javascript:void(0)"><i
                                                                                            class="feather feather-trash-2"></i></a>
                                                                                </td> -->
                                                                        </tr>
                                                                        {%endfor%}
                                                                        {% else %}
                                                                        <div
                                                                            class="expanel expanel-default mt-4 add-expanel">
                                                                            <div class="expanel-body">
                                                                                No Other Roles Added/Assigned.
                                                                            </div>
                                                                        </div>
                                                                        {% endif %}
                                                                    </tbody>
                                                                </table>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li>
                                <!-- Section 3 -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!--End Row-->
        </div>

        <div class="tab-pane fade show" id="tab-8" role="tabpanel">

            <div class="card">
                <div class="card-header border-bottom-0">
                    <h3 class="card-title ">Payroll Settings</h3>
                </div>
                <div class="card-body">
                    <!-- Accordion begin -->
                    <ul class="demo-accordion accordionjs m-0" data-active-index="false">
                        <!-- Section 1 -->
                        <li class="acc_active">
                            <div class="card-header  border-0">
                                <h3>Security Control Record Settings</h3>
                            </div>
                            <form class="card-body pt-3" method="POST" action="/update/sif/"
                                enctype="multipart/form-data">
                                <div class="card">
                                    <div class="card-header  border-0">
                                        <h4 class="card-title">Security Control Record Settings</h4>
                                    </div>
                                    <div class="card-body">
                                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label class="form-label mb-0 mt-2">Employer/Company Unique
                                                        ID</label>
                                                </div>
                                                <div class="col-md-9">
                                                    <input type="number" class="form-control"
                                                        placeholder="Employer/Company Unique ID"
                                                        value="{{company_details.company_unique_id | default('')}}"
                                                        name="company_unique_id">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label class="form-label mb-0 mt-2">Company's Bank Routing
                                                        Code</label>
                                                </div>
                                                <div class="col-md-9">
                                                    <input type="number" class="form-control"
                                                        placeholder="Company's Bank Routing Code"
                                                        value="{{company_details.company_routing_code | default('')}}"
                                                        name="company_routing_code">
                                                </div>
                                            </div>
                                        </div>


                                    </div>
                                    <div class="card-footer">
                                        <!-- <a  href="javascript:void(0);" class="btn btn-success">Save Changes</a> -->
                                        <button class="btn btn-success">Save Changes</button>
                                        <a href="javascript:void(0);" class="btn btn-danger">Cancel</a>
                                    </div>
                            </form>
                        </li>
                        <!-- Section 1 -->
                        <!-- Section 2 -->
                        <li>
                            <div class="card-header  border-0">
                                <h3>Exchanges/Banks</h3>
                            </div>
                            <div class="card">
                                <div class="card-body pt-0">
                                    <p>Setup Companies Exchanges/Banks from which the salaries will be processed for the
                                        employees.</p>
                                    <div class="row">
                                        <div class="col-xl-12 col-md-12 col-lg-12">
                                            <div class="card">
                                                <div class="card-header  border-0">
                                                    <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                        data-bs-toggle="modal" data-bs-target="#addexchangemodal">Add
                                                        New</a>
                                                </div>
                                                <div class="card-body pt-1">
                                                    <div class="table-responsive">

                                                        <table
                                                            class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                            id="exchange-table">
                                                            <thead>
                                                                <tr>
                                                                    <th class="border-bottom-0">Exchange/Bank Name
                                                                    </th>
                                                                    <th class="border-bottom-0">Actions</th>
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                {% if company_details.company_exchanges|list|length >0
                                                                %}
                                                                {% for item in company_details.company_exchanges %}
                                                                <tr>

                                                                    <td>{{item.exchange_name}}</td>

                                                                    <td>
                                                                        <a class="btn btn-primary btn-icon btn-sm"
                                                                            data-bs-toggle="modal" data-bs-target="#"
                                                                            data-ot_policy_name="{{item.exchange_name}}"
                                                                            data-id="{{item._id}}">
                                                                            <i class="feather feather-edit"
                                                                                data-bs-toggle="tooltip"
                                                                                data-original-title="Edit"></i>
                                                                        </a>
                                                                        <!-- <a class="btn btn-danger btn-icon btn-sm btnDelWorktimings"
                                                                            data-bs-toggle="tooltip"
                                                                            data-original-title="Delete"
                                                                            data-id="{{item._id}}"
                                                                            href="javascript:void(0)"><i
                                                                                class="feather feather-trash-2"></i></a> -->
                                                                    </td>
                                                                </tr>
                                                                {%endfor%}
                                                                {% else %}
                                                                <div
                                                                    class="expanel expanel-default mt-4 exchange-expanel">
                                                                    <div class="expanel-body">
                                                                        No Deduction Reasons Added.
                                                                    </div>
                                                                </div>
                                                                {% endif %}
                                                            </tbody>
                                                        </table>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </li>
                        <!-- Section 2 -->
                    </ul>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-9" role="tabpanel">
            <!--Row-->
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header border-bottom-0">
                            <h3 class="card-title ">Letter Settings</h3>
                        </div>
                        <div class="card-body">
                            <!-- Accordion begin -->
                            <ul class="demo-accordion accordionjs m-0" data-active-index="false">

                                <!-- Section 4 Offices -->
                                <li class="acc_active">
                                    <div class="card-header  border-0">
                                        <h3>Authorised Signatories</h3>
                                    </div>
                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <p>Adding a authorised signatures so that it can be added to create a letter
                                                template.</p>
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-body pt-1">
                                                            <form id="upload-file-employee" method="post"
                                                                enctype="multipart/form-data">
                                                                <input type="hidden" name="csrf_token" id="csrf_token"
                                                                    value="{{ csrf_token() }}" />
                                                                <div class="card">
                                                                    <div class="card-header border-bottom-0">
                                                                        <h3 class="card-title">File Upload</h3>
                                                                    </div>
                                                                    <div class="card-body">
                                                                        <div class="row">
                                                                            <div class="col-md-4 col-lg-4">
                                                                                <div class="form-group">
                                                                                    <label class="form-label"> Select
                                                                                        Employee:</label>
                                                                                    <select
                                                                                        class="form-control select2-show-search custom-select"
                                                                                        id="employee_details_id"
                                                                                        placeholder="Choose employee"
                                                                                        required>
                                                                                        {% for item in
                                                                                        company_details.employees%}
                                                                                        <option value="{{item._id}}"
                                                                                            class="p-2">
                                                                                            {{item.first_name + ' '
                                                                                            +item.last_name}}
                                                                                        </option>
                                                                                        {%endfor%}
                                                                                    </select>
                                                                                </div>
                                                                            </div>
                                                                            <div class="col-md-6 col-lg-6">
                                                                                <div class="col-lg-12 col-sm-12">
                                                                                    <label class="form-label">Select the
                                                                                        signature file:</label>

                                                                                    <input type="file" class="dropify"
                                                                                        id="employee_file_upload"
                                                                                        name="file_upload"
                                                                                        data-height="90" data-width="10"
                                                                                        required />
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="card-footer">
                                                                        <button href="javascript:void(0);"
                                                                            class="btn btn-primary "
                                                                            id="btnProcessEmployee">Upload
                                                                            Signature</button>
                                                                    </div>
                                                                </div>
                                                            </form>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <!-- <div class="card-header  border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal" data-bs-target="#addofficesmodal">Add
                                                                New</a>
                                                        </div> -->
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">
                                                                {% if company_details.company_signatures %}
                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                    id="offices-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0 w-5">Authorised
                                                                                Person
                                                                            </th>
                                                                            <th class="border-bottom-0">Signature
                                                                            </th>
                                                                            <!-- <th class="border-bottom-0">Actions</th> -->
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% for item in
                                                                        company_details.company_signatures %}
                                                                        <tr>

                                                                            <td>{{item.employee_details_id.first_name +
                                                                                ' '
                                                                                +item.employee_details_id.last_name}}
                                                                            </td>
                                                                            <td><img class=" avatar-xxl" alt="img"
                                                                                    src="{{url_for('static', filename='uploads/letters/'+item.signature_path|default('profile.png',true))}}">
                                                                            </td>
                                                                            <!-- <td>
                                                                                <a class="btn btn-primary btn-icon btn-sm"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-target="#editworkmodal"
                                                                                    data-id="{{item._id}}">
                                                                                    <i class="feather feather-edit"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Edit"></i>
                                                                                </a>
                                                                            </td> -->
                                                                        </tr>
                                                                        {%endfor%}
                                                                    </tbody>
                                                                </table>
                                                                {% else %}
                                                                <div class="expanel expanel-default mt-4">
                                                                    <div class="expanel-body">
                                                                        No Offices Added.
                                                                    </div>
                                                                </div>
                                                                {% endif %}
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!--End Row-->
        </div>

        <div class="tab-pane fade show" id="tab-10" role="tabpanel">

            <div class="card">
                <div class="card-header border-bottom-0">
                    <h3 class="card-title ">Sub Companies Settings</h3>
                </div>
                <div class="card-body">
                    <!-- Accordion begin -->
                    <ul class="demo-accordion accordionjs m-0" data-active-index="false">
                        <!-- Section 2 -->
                        <li class="acc_active">
                            <div class="card-header  border-0">
                                <h3>Sub Companies</h3>
                            </div>
                            <div class="card">
                                <div class="card-body pt-0">
                                    <p>Setup Sub Companies associated with the Group.</p>
                                    <div class="row">
                                        <div class="col-xl-12 col-md-12 col-lg-12">
                                            <div class="card">
                                                <div class="card-header  border-0">
                                                    <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                        data-bs-toggle="modal"
                                                        data-bs-target="#addcompanyprofilemodal">Add
                                                        New</a>
                                                </div>
                                                <div class="card-body pt-1">
                                                    <div class="table-responsive">

                                                        <table
                                                            class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                            id="company-profile-table">
                                                            <thead>
                                                                <tr>
                                                                    <th class="border-bottom-0">Company Name
                                                                    </th>
                                                                    <th class="border-bottom-0">Company Unique ID
                                                                    </th>
                                                                    <th class="border-bottom-0">Company Account Number
                                                                    </th>
                                                                    <th class="border-bottom-0">Company Routing Code
                                                                    </th>
                                                                    <th class="border-bottom-0">Actions
                                                                    </th>
                                                                    <!-- <th class="border-bottom-0">Actions</th> -->
                                                                </tr>
                                                            </thead>
                                                            <tbody>
                                                                {% if company_details.sub_companies|list|length >0 %}
                                                                {% for item in company_details.sub_companies %}
                                                                <tr>

                                                                    <td>{{item.company_name}}</td>
                                                                    <td>{{item.company_unique_id}}</td>
                                                                    <td>{{item.company_account_number}}</td>
                                                                    <td>{{item.company_routing_code}}</td>
                                                                    <td>
                                                                        <!-- <a class="btn btn-primary btn-icon btn-sm" data-bs-toggle="modal"
                                                                            data-bs-target="#editdepartmentmodal" data-id="{{item.dep_id}}"
                                                                            data-dept_name="{{item.department_name}}">
                                                                            <i class="feather feather-edit" data-bs-toggle="tooltip"
                                                                                data-original-title="Edit"></i>
                                                                        </a>
                                                                        <a class="btn btn-danger btn-icon btn-sm" data-bs-toggle="tooltip"
                                                                            data-original-title="Delete"
                                                                            href="{{ url_for('company.delete_department',dep_id=item.dep_id) }}"><i
                                                                                class="feather feather-trash-2"></i></a> -->
                                                                        <a class="btn btn-primary btn-icon btn-sm"
                                                                            data-bs-toggle="modal" data-bs-target="#editCompanyModal" data-id="{{item._id}}"
                                                                            data-company_name="{{item.company_name}}"
                                                                            data-company_unique_id="{{item.company_unique_id}}"
                                                                            data-company_account_number="{{item.company_account_number}}"
                                                                            data-company_routing_code="{{item.company_routing_code}}">
                                                                            <i class="feather feather-edit"
                                                                                data-bs-toggle="tooltip"
                                                                                data-original-title="Edit"></i>
                                                                        </a>
                                                                        <!-- <a class="btn btn-danger btn-icon btn-sm" data-bs-toggle="tooltip"
                                                                        data-original-title="Delete"
                                                                        href="{{ url_for('company.delete_department',dep_id=item.dep_id) }}"><i
                                                                            class="feather feather-trash-2"></i></a>  -->
                                                                    </td>

                                                                    <!-- <td>
                                                                        <a class="btn btn-primary btn-icon btn-sm"
                                                                            data-bs-toggle="modal"
                                                                            data-bs-target="#"
                                                                            data-id="{{item._id}}">
                                                                            <i class="feather feather-edit"
                                                                                data-bs-toggle="tooltip"
                                                                                data-original-title="Edit"></i>
                                                                        </a>
                                                                        <!-- <a class="btn btn-danger btn-icon btn-sm btnDelWorktimings"
                                                                            data-bs-toggle="tooltip"
                                                                            data-original-title="Delete"
                                                                            data-id="{{item._id}}"
                                                                            href="javascript:void(0)"><i
                                                                                class="feather feather-trash-2"></i></a> 
                                                                    </td> -->
                                                                </tr>
                                                                {%endfor%}
                                                                {% else %}
                                                                <div
                                                                    class="expanel expanel-default mt-4 company-profile-expanel">
                                                                    <div class="expanel-body">
                                                                        No Deduction Reasons Added.
                                                                    </div>
                                                                </div>
                                                                {% endif %}
                                                            </tbody>
                                                        </table>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </li>
                        <!-- Section 2 -->
                    </ul>
                </div>
            </div>
        </div>

        <div class="tab-pane fade" id="tab-3" role="tabpanel">
            <form class="card-body pt-3" method="POST" action="/update/emailsettings/" enctype="multipart/form-data">
                <div class="card">
                    <div class="card-header  border-0">
                        <h4 class="card-title">Email Settings</h4>
                    </div>
                    <div class="card-body">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-3">
                                    <label class="form-label">Email Drivers</label>
                                </div>
                                <div class="col-md-9">
                                    <div class="custom-controls-stacked d-sm-flex">
                                        <label class="custom-control custom-radio me-4">
                                            <input type="radio" class="custom-control-input" id="email-smtp"
                                                name="example-radios3" value="option2" checked>
                                            <span class="custom-control-label">SMTP</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="">
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Host</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control" placeholder="host" name="email_host"
                                            value="{{company_details.email_config.company_email_host}}">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Port</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control" placeholder="port" name="email_port"
                                            value="{{company_details.email_config.company_email_port}}">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">User Name</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="text" class="form-control" placeholder="User" name="email_user"
                                            value="{{company_details.email_config.company_email_user}}">
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="row">
                                    <div class="col-md-3">
                                        <label class="form-label mb-0 mt-2">Password</label>
                                    </div>
                                    <div class="col-md-9">
                                        <input type="password" class="form-control" placeholder="Password"
                                            name="email_password"
                                            value="{{company_details.email_config.company_email_password}}">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-3">
                                    <label class="form-label mb-0 mt-2">From Name</label>
                                </div>
                                <div class="col-md-9">
                                    <input type="text" class="form-control" placeholder="dayone" name="email_name"
                                        value="{{company_details.email_config.company_email_name}}">
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="row">
                                <div class="col-md-3">
                                    <label class="form-label mb-0 mt-2">From Email</label>
                                </div>
                                <div class="col-md-9">
                                    <input type="text" class="form-control" placeholder="example@gmail.com"
                                        name="email_from" value="{{company_details.email_config.company_email_from}}">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <button class="btn btn-success">Save Changes</button>
                        <a href="javascript:void(0);" class="btn btn-danger">Cancel</a>
                        <!-- <a  href="#" class="btn btn-info" >Send Test Email</a> -->
                    </div>
                </div>
            </form>
        </div>

        <div class="tab-pane fade" id="tab-12" role="tabpanel">

            <!--Row-->
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header border-bottom-0">
                            <h3 class="card-title ">Biometrics Settings</h3>
                        </div>
                        <div class="card-body">
                            <!-- Accordion begin -->
                            <ul class="demo-accordion accordionjs m-0" data-active-index="false">
                                <!-- Section 1 -->
                                <li class="acc_active">
                                    <div class="card-header  border-0">
                                        <h3>Biometric Device</h3>
                                    </div>
                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <p>Setup Biometric Devices for the company.</p>
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header  border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#addbiometricmodal">Add
                                                                New</a>
                                                        </div>
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">
                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                    id="biometric-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0">Device Name</th>
                                                                            <th class="border-bottom-0">IP Address</th>
                                                                            <th class="border-bottom-0">Port</th>
                                                                            <th class="border-bottom-0">Actions</th>
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% if
                                                                        company_details.biometric_devices|list|length >0
                                                                        %}

                                                                        {% for item in company_details.biometric_devices
                                                                        %}
                                                                        <tr>

                                                                            <td>{{item.device_name}}</td>
                                                                            <td>{{item.device_ip_address}}</td>
                                                                            <td>{{item.device_port}}</td>
                                                                            <td>
                                                                                <a class="btn btn-primary btn-icon btn-sm"
                                                                                    data-bs-toggle="modal"
                                                                                    data-bs-target="#"
                                                                                    data-ot_policy_name="{{item.device_name}}"
                                                                                    data-id="{{item._id}}">
                                                                                    <i class="feather feather-edit"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Edit"></i>
                                                                                </a>
                                                                            </td>
                                                                        </tr>
                                                                        {%endfor%}
                                                                        {% else %}
                                                                        <div
                                                                            class="expanel expanel-default mt-4 biometric-expanel">
                                                                            <div class="expanel-body">
                                                                                No Biometric Devices Added.
                                                                            </div>
                                                                        </div>
                                                                        {% endif %}
                                                                    </tbody>
                                                                </table>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li>
                                <!-- Section 1 -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!--End Row-->
        </div>

        <div class="tab-pane fade" id="tab-13" role="tabpanel">

            <!--Row-->
            <div class="row">
                <div class="col-md-12">
                    <div class="card">
                        <div class="card-header border-bottom-0">
                            <h3 class="card-title ">Multiple Access Settings</h3>
                        </div>
                        
                        <div class="card-body">
                            <!-- Accordion begin -->
                            <ul class="demo-accordion accordionjs m-0" data-active-index="false">
                                <!-- Section 1 -->
                                <li class="acc_active">
                                    <div class="card-header  border-0">
                                        <h3>Multiple Access</h3>
                                    </div>
                                    <div class="card">
                                        <div class="card-body pt-0">
                                            <p>Setup Multiple Access .</p>
                                            <div class="row">
                                                <div class="col-xl-12 col-md-12 col-lg-12">
                                                    <div class="card">
                                                        <div class="card-header  border-0">
                                                            <a href="javascript:void(0);" class="btn btn-primary me-3"
                                                                data-bs-toggle="modal"
                                                                data-bs-target="#AddMultipleAccess">Add
                                                                New</a>
                                                        </div>
                                                        <div class="card-body pt-1">
                                                            <div class="table-responsive">
                                                                
                                                                <table
                                                                    class="table  table-vcenter text-nowrap table-bordered border-bottom table-striped"
                                                                    id="multiple-access-table">
                                                                    <thead>
                                                                        <tr>
                                                                            <th class="border-bottom-0">Email</th>
                                                                            <th class="border-bottom-0">Comapany Access Name</th>
                                                                            <!-- <th class="border-bottom-0">Actions</th> -->
                                                                        </tr>
                                                                    </thead>
                                                                    <tbody>
                                                                        {% if
                                                                            multiple_access_doc|list|length >0
                                                                        %}

                                                                        {% for item in multiple_access_doc%}
                                                                            <tr>
                                                                                
                                                                                <td>{{item.email}}</td>
                                                                                <td>
                                                                                    <ol class="custom-list">
                                                                                        {% for dataacces in item.MultipleAccessEntry %}
                                                                                            <li>{{ dataacces.multiple_access_company_name }}</li>
                                                                                        {% endfor %}
                                                                                    </ol>
                                                                                </td>

                                                                                <td>
                                                                                        <a class="btn btn-danger btn-icon btn-sm btnDeleteMultipleAccess"
                                                                                        data-bs-toggle="tooltip"
                                                                                        data-original-title="Delete"
                                                                                        data-id="{{item._id}}"
                                                                                        href="javascript:void(0)"><i
                                                                                            class="feather feather-trash-2"></i></a>
                                                                                </td>
                                                                            </tr>
                                                                        {%endfor%}

                                                                       
                                                                        {% else %}
                                                                        <div
                                                                            class="expanel expanel-default mt-4 biometric-expanel">
                                                                            <div class="expanel-body">
                                                                                No Multiple Access Data.
                                                                            </div>
                                                                        </div>
                                                                        {% endif %}
                                                                    </tbody>
                                                                </table>

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </li>
                                <!-- Section 1 -->
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!--End Row-->
        </div>
    </div>

</div>
<!-- End Row -->
<!-- Modals Start -->
{% include "company/modals/settings.html" %}
<!-- Modal End -->
{% endblock %}

{% block script %}
{{ super() }}
<!-- INTERNAL Index js-->
<script src="{{ url_for('static', filename='assets/plugins/modal-datepicker/datepicker.js') }}"></script>
<script src="{{ url_for('static', filename='assets/plugins/bootstrap-timepicker/bootstrap-timepicker.js') }}"></script>
<script src="{{ url_for('static', filename='assets/js/hr/hr-settings.js') }}"></script>
<script src="{{ url_for('static', filename='assets/plugins/accordion/accordion.min.js') }}"></script>


<script src="{{ url_for('static', filename='assets/plugins/sweet-alert/jquery.sweet-modal.min.js') }}"></script>
<script src="{{ url_for('static', filename='assets/plugins/sweet-alert/sweetalert.min.js') }}"></script>

<!-- INTERNAL Sumoselect js-->
<script src="{{ url_for('static', filename='assets/plugins/sumoselect/jquery.sumoselect.js') }}"></script>

<!-- <script src="{{ url_for('static', filename='assets/plugins/jQuerytransfer/jquery.transfer.js') }}"></script> -->
<!-- <script>
    {
        % include "js/jquery.transfer.js" %
    }
</script> -->

<script src="{{ url_for('static', filename='assets/plugins/multi/multi.min.js') }}"></script>

<!-- <script src="{{ url_for('static', filename='assets/js/formelementadvnced.js') }}"></script> -->
<!-- <script>
    {
        % include "js/formelementadvnced.js" %
    }
</script> -->
<!-- <script src="{{ url_for('static', filename='assets/js/select2.js') }}"></script> -->
<script src="{{ url_for('static', filename='assets/plugins/daterangepicker/moment.min.js') }}"></script>
<script src="{{ url_for('static', filename='assets/plugins/daterangepicker/daterangepicker.js') }}"></script>
<script src="{{ url_for('static', filename='assets/plugins/select2/select2.full.min.js') }}"></script>
<script src="{{ url_for('static', filename='assets/js/select2.js') }}"></script>
<script src="{{ url_for('static', filename='assets/plugins/fileupload/js/dropify.js') }}"></script>

<script>
    $(function (e) {
        'use strict';
        $(".demo-accordion").accordionjs();
    });
    //Timepicker
    $('.timepicker').timepicker({
        showInputs: false,
    });
    $('.dropify').dropify({
        messages: {
            'default': 'Drag and drop a file here or click',
            'replace': 'Drag and drop or click to replace',
            'remove': 'Remove',
            'error': 'Ooops, something wrong appended.'
        },
        error: {
            'fileSize': 'The file size is too big (2M max).'
        },
        allowedFileExtensions: ['png', 'jpeg', 'jpg']
    });
</script>
<script>
    $(function () {
        // Ajax Add Work Timings
        $(document).on("click", '#btnAddWorkTiming', function (e) {
            e.preventDefault();
            cs = $('#csrf').val()

            swal({
                title: "Are you sure?",
                text: "You want to add this work timings!",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {

                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/createworktiming/settings/',
                        data: $('#work_timing_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            $('#worktimings-table tbody').empty();
                            $('#addworktimingmodal').modal('toggle');
                            var employee_data = '';
                            //console.log(data)
                            $.each(JSON.parse(data), function (index, value) {
                                employee_data += '<tr>';
                                employee_data +=
                                    '<td> <span class="badge" style="color:' + value
                                        .schedule_color + '">' + value.name +
                                    '</span></td>';
                                employee_data += '<td>' + (value.is_day_off ? 'NA' :
                                    (value.office_start_at + ' - ' + value
                                        .office_end_at)) + '</td>';
                                employee_data += '<td>' + (value.is_day_off ? 'NA' :
                                    (value.late_arrival_later_than +
                                        ' Minutes')) + '</td>';
                                employee_data += '<td>' + (value.is_day_off ? 'NA' :
                                    (value.early_departure_earliar_than +
                                        ' Minutes')) + '</td>';
                                employee_data += '<td>' + (value.is_day_off ? 'NA' :
                                    (value.consider_absent_after + ' Minutes')
                                ) +
                                    '</td>';
                                //employee_data += '<td>' + value.out_of_office_check_in + '</td>';
                                //employee_data += '<td>' + value.allow_breaks + ' Minutes' + '</td>';
                                employee_data += '<td> <a class="btn btn-primary btn-icon btn-sm"\
                                    data-bs-toggle="modal"\
                                    data-bs-target="#editworkmodal"\
                                    data-id="' + value._id.$oid + '"\
                                    data-schedule_name="' + value.name + '"\
                                    data-schedule_color="' + value.schedule_color + '"\
                                    data-office_start_at="' + value.office_start_at + '"\
                                    data-office_end_at="' + value.office_end_at + '"\
                                    data-is_day_off="' + value.is_day_off + '"\
                                    data-late_arrival__later_than="' + value.late_arrival_later_than + '"\
                                    data-early_departure_earliar_than="' + value.early_departure_earliar_than + '"\
                                    data-consider_absent_after="' + value.consider_absent_after + '"\
                                    data-week_offs="' + value.week_offs + '"\
                                    data-is_default="' + value.is_default + '"\
                                    data-minimum_ot="' + value.minimum_ot + '">\
                                    <i class="feather feather-edit"\
                                        data-bs-toggle="tooltip"\
                                        data-original-title="Edit"></i>\
                                </a>\
                                <a class="btn btn-danger btn-icon btn-sm btnDelWorktimings" \
                                    data-bs-toggle="tooltip"\
                                    data-original-title="Delete"\
                                    data-id="' + value._id.$oid + '"\
                                    ><i \
                                    class="feather feather-trash-2"></i></a>\
                            </td>';
                                employee_data += '<tr>';
                            });
                            $('#worktimings-table tbody').html(employee_data);
                            swal({
                                title: "Success",
                                text: "Successfully Added Work Timing(s)!",
                                icon: "success",
                            });
                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Ajax Work timings

        // Toggle Is Day off in Work Timings
        $('.is_day_off').change(function () {
            if (this.checked) {
                $('.day_off_div').hide();
            } else {
                $('.day_off_div').show();
            }
        });
        //End Toggle

        // Ajax Add Gen Settings
        $('.btnGenSettings').click(function (e) {
            e.preventDefault();

            swal({
                title: "Are you sure?",
                text: "You want to save these as company settings? ",
                icon: "info",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {

                    cs = $('#csrf_gen').val()
                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/update/generalsettings/',
                        data: $('#gen_settings_form').serialize(),
                        type: 'POST',
                    }).done(function (data) {
                        //console.log(data)
                        if (data.status == "success") {
                            swal({
                                title: "Success",
                                text: "Successfully Saved Setting(s)!",
                                icon: "success",
                            });
                        }
                    })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Ajax Gen Settings

        // Ajax Edit Work Timings
        $(document).on("click", '#btnEditWorkTiming', function (e) {
            e.preventDefault();
            cs = $('#edit_csrf').val()
            swal({
                title: "Are you sure?",
                text: "You want to create schedule for selected employee(s)? If you have assigned same shifts for a day it won't reflect! ",
                icon: "info",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {
                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/editworktiming/settings/',
                        data: $('#edit_work_timing_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            $('#worktimings-table tbody').empty();
                            $('#editworkmodal').modal('toggle');
                            var employee_data = '';
                            //console.log(data)
                            $.each(JSON.parse(data), function (index, value) {
                                employee_data += '<tr>';
                                employee_data +=
                                    '<td> <span class="badge" style="color:' + value
                                        .schedule_color + '">' + value.name +
                                    '</span></td>';
                                employee_data += '<td>' + (value.is_day_off ? 'NA' :
                                    (value.office_start_at + ' - ' + value
                                        .office_end_at)) + '</td>';
                                employee_data += '<td>' + (value.is_day_off ? 'NA' :
                                    (value.late_arrival_later_than +
                                        ' Minutes')) + '</td>';
                                employee_data += '<td>' + (value.is_day_off ? 'NA' :
                                    (value.early_departure_earliar_than +
                                        ' Minutes')) + '</td>';
                                employee_data += '<td>' + (value.is_day_off ? 'NA' :
                                    (value.consider_absent_after + ' Minutes')
                                ) +
                                    '</td>';
                                employee_data += '<td> <a class="btn btn-primary btn-icon btn-sm"\
                                    data-bs-toggle="modal"\
                                    data-bs-target="#editworkmodal"\
                                    data-id="' + value._id.$oid + '"\
                                    data-schedule_name="' + value.name + '"\
                                    data-schedule_color="' + value.schedule_color + '"\
                                    data-office_start_at="' + value.office_start_at + '"\
                                    data-office_end_at="' + value.office_end_at + '"\
                                    data-is_day_off="' + value.is_day_off + '"\
                                    data-late_arrival__later_than="' + value.late_arrival_later_than + '"\
                                    data-early_departure_earliar_than="' + value.early_departure_earliar_than + '"\
                                    data-consider_absent_after="' + value.consider_absent_after + '"\
                                    data-week_offs="' + value.week_offs + '"\
                                    data-is_default="' + value.is_default + '"\
                                    data-minimum_ot="' + value.minimum_ot + '">\
                                    <i class="feather feather-edit"\
                                        data-bs-toggle="tooltip"\
                                        data-original-title="Edit"></i>\
                                </a>\
                                <a class="btn btn-danger btn-icon btn-sm btnDelWorktimings "\
                                    data-bs-toggle="tooltip"\
                                    data-original-title="Delete"\
                                    data-id="' + value._id.$oid + '"\
                                    href="javascript:void(0)"\
                                    ><i \
                                    class="feather feather-trash-2"></i></a>\
                            </td>';
                                employee_data += '<tr>';
                            });
                            $('#worktimings-table tbody').html(employee_data);
                            swal({
                                title: "Success",
                                text: "Successfully Updated Worktiming(s)!",
                                icon: "success",
                            });
                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Ajax Edit Work timings

        // Toggle Is Day off in Work Timings
        $('.edit_is_day_off').change(function () {
            if (this.checked) {
                $('.edit_day_off_div').hide();
            } else {
                $('.edit_day_off_div').show();
            }
        });
        //End Toggle

        // Ajax Del WT Settings
        $(document).on("click", '.btnDelWorktimings', function (e) {
            e.preventDefault();
            swal({
                title: "Are you sure?",
                text: "You want to delete this as worktiming settings? If there are schedules assigned for this work timing it won't delete! ",
                icon: "warning",
                buttons: true,
            }).then((willDelete) => {
                if (willDelete) {
                    cs = $('#csrf_gen').val()
                    var work_timing_id = $(this).attr("data-id");
                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/deleteworktiming/settings/',
                        data: {
                            id: work_timing_id
                        },
                        type: 'POST',
                    }).done(function (data) {
                        //console.log(data)
                        if (data.status == "success") {
                            $('#worktimings-table tbody').empty();
                            var employee_data = '';
                            $.each(JSON.parse(data.details), function (index, value) {
                                employee_data += '<tr>';
                                employee_data +=
                                    '<td> <span class="badge" style="color:' +
                                    value.schedule_color + '">' + value.name +
                                    '</span></td>';
                                employee_data += '<td>' + (value.is_day_off ?
                                    'NA' : (value.office_start_at + ' - ' +
                                        value
                                            .office_end_at)) + '</td>';
                                employee_data += '<td>' + (value.is_day_off ?
                                    'NA' : (value.late_arrival_later_than +
                                        ' Minutes')) + '</td>';
                                employee_data += '<td>' + (value.is_day_off ?
                                    'NA' : (value
                                        .early_departure_earliar_than +
                                        ' Minutes')) + '</td>';
                                employee_data += '<td>' + (value.is_day_off ?
                                    'NA' : (value.consider_absent_after +
                                        ' Minutes')) +
                                    '</td>';
                                employee_data += '<td> <a class="btn btn-primary btn-icon btn-sm"\
                                            data-bs-toggle="modal"\
                                            data-bs-target="#editworkmodal"\
                                            data-id="' + value._id.$oid + '"\
                                            data-schedule_name="' + value.name + '"\
                                            data-schedule_color="' + value.schedule_color + '"\
                                            data-office_start_at="' + value.office_start_at + '"\
                                            data-office_end_at="' + value.office_end_at + '"\
                                            data-is_day_off="' + value.is_day_off + '"\
                                            data-late_arrival__later_than="' + value.late_arrival_later_than + '"\
                                            data-early_departure_earliar_than="' + value.early_departure_earliar_than + '"\
                                            data-consider_absent_after="' + value.consider_absent_after + '"\
                                            data-week_offs="' + value.week_offs + '">\
                                            <i class="feather feather-edit"\
                                                data-bs-toggle="tooltip"\
                                                data-original-title="Edit"></i>\
                                        </a>\
                                        <a class="btn btn-danger btn-icon btn-sm btnDelWorktimings "\
                                            data-bs-toggle="tooltip"\
                                            data-original-title="Delete"\
                                            data-id="' + value._id.$oid + '"\
                                            href="javascript:void(0)"\
                                            ><i \
                                            class="feather feather-trash-2"></i></a>\
                                    </td>';
                                employee_data += '<tr>';
                            });
                            $('#worktimings-table tbody').html(employee_data);
                            swal({
                                title: "Success",
                                text: "Successfully Deleted Work Timing Setting(s)!",
                                icon: "success",
                            });
                        } else {
                            swal({
                                title: "Error",
                                text: "Cannot Delete this work timings!",
                                icon: "error",
                            });
                        }
                    })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Ajax Del WT Settings

        // Ajax Add OT
        $(document).on("click", '#btnAddOverrtime', function (e) {
            e.preventDefault();
            cs = $('#csrf').val()
            swal({
                title: "Are you sure?",
                text: "You want to add this Overtime Policy?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {

                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/create/overtimepolicy/',
                        data: $('#over_time_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            if (data.status == "success") {
                                $('#overtime-table tbody').empty();
                                $('#addovertimemodal').modal('toggle');
                                var response_data = '';
                                $.each(JSON.parse(data.details), function (index, value) {
                                    response_data += '<tr>';
                                    response_data += '<td>' + value.ot_policy_name +
                                        '</td>';
                                    response_data += '<td>' + value
                                        .ot_policy_multiplier + '</td>';
                                    response_data += '<td>' + value.ot_policy_on +
                                        '</td>';
                                    response_data += '<td> <a class="btn btn-primary btn-icon btn-sm"\
                                        data-bs-toggle="modal"\
                                        data-bs-target="#editworkmodal"\
                                        data-id="' + value._id.$oid + '"\
                                        data-ot_policy_name="' + value.ot_policy_name + '"\
                                        data-ot_policy_multiplier="' + value.ot_policy_multiplier + '"\
                                        data-ot_policy_on="' + value.ot_policy_on + '">\
                                        <i class="feather feather-edit"\
                                            data-bs-toggle="tooltip"\
                                            data-original-title="Edit"></i>\
                                    </a>\
                                    <a class="btn btn-danger btn-icon btn-sm btnDelWorktimings" \
                                        data-bs-toggle="tooltip"\
                                        data-original-title="Delete"\
                                        data-id="' + value._id.$oid + '"\
                                        ><i \
                                        class="feather feather-trash-2"></i></a>\
                                </td>';
                                    response_data += '<tr>';
                                });
                                $('#overtime-table tbody').html(response_data);
                                swal({
                                    title: "Success",
                                    text: "Successfully Added Overtime Policy(s)!",
                                    icon: "success",
                                });
                            } else {
                                swal({
                                    title: "Failed",
                                    text: "Please Select Required Fields!",
                                    icon: "warning",
                                });
                            }

                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Ajax OT

        // Ajax Add Offices
        $(document).on("click", '#btnAddOffice', function (e) {
            e.preventDefault();
            cs = $('#csrf_off').val()
            swal({
                title: "Are you sure?",
                text: "You want to add this office!",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {
                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/createoffice/settings/',
                        data: $('#offices_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            $('#offices-table tbody').empty();
                            $('#addofficesmodal').modal('toggle');
                            var employee_data = '';
                            //console.log(data)
                            $.each(JSON.parse(data), function (index, value) {
                                employee_data += '<tr>';
                                employee_data += '<td>' + value.office_name +
                                    '</td>';
                                employee_data += '<td>' + value.location_name +
                                    '</td>';
                                employee_data += '<td>' + value.location_radius +
                                    '</td>';

                                employee_data += '<td> <a class="btn btn-primary btn-icon btn-sm btnEditOffice" \
                                data-bs-toggle="tooltip"\
                                data-original-title="Edit"\
                                data-id="' + value._id.$oid + '"\
                                ><i \
                                class="feather feather-edit"></i></a>\
                                </td>';
                                employee_data += '<tr>';
                            });
                            $('#offices-table tbody').html(employee_data);
                            swal({
                                title: "Success",
                                text: "Successfully Added New Office(s)!",
                                icon: "success",
                            });
                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Ajax Work timings

        // Ajax Add Addition
        $(document).on("click", '#btnAddAddition', function (e) {
            e.preventDefault();
            cs = $('#csrf').val()
            swal({
                title: "Are you sure?",
                text: "You want to add this Addition Reason?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {

                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/createreason/settings/',
                        data: $('#addition_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            if (data.status == "success") {
                                $('#addition-table tbody').empty();
                                $('#addadditionmodal').modal('toggle');
                                $('.add-expanel').empty();

                                var response_data = '';
                                $.each(JSON.parse(data.details), function (index, value) {
                                    if (value.adjustment_type == "addition") {
                                        response_data += '<tr>';
                                        response_data += '<td>' + value
                                            .adjustment_reason +
                                            '</td>';
                                        response_data += '<td> <a class="btn btn-primary btn-icon btn-sm"\
                                                data-bs-toggle="modal"\
                                                data-bs-target="#"\
                                                data-id="' + value._id + '"\
                                                data-ot_policy_name="' + value.adjustment_reason + '">\
                                                <i class="feather feather-edit"\
                                                    data-bs-toggle="tooltip"\
                                                    data-original-title="Edit"></i>\
                                            </a>\
                                        </td>';
                                        response_data += '</tr>';
                                    }

                                });
                                $('#addition-table tbody').html(response_data);
                                swal({
                                    title: "Success",
                                    text: "Successfully Added Reason(s)!",
                                    icon: "success",
                                });
                            } else {
                                swal({
                                    title: "Failed",
                                    text: "Please Select Required Fields!",
                                    icon: "warning",
                                });
                            }

                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Ajax Addition

        // Ajax Add Deduction
        $(document).on("click", '#btnAddDeduction', function (e) {
            e.preventDefault();
            cs = $('#csrf').val()
            swal({
                title: "Are you sure?",
                text: "You want to add this Deduction Reason?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {

                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/createreason/settings/',
                        data: $('#deduction_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            if (data.status == "success") {
                                $('#deduction-table tbody').empty();
                                $('.ded-expanel').empty();
                                $('#adddeductionmodal').modal('toggle');
                                var response_data = '';
                                $.each(JSON.parse(data.details), function (index, value) {
                                    if (value.adjustment_type == "deduction") {

                                        response_data += '<tr>';
                                        response_data += '<td>' + value
                                            .adjustment_reason +
                                            '</td>';
                                        response_data += '<td> <a class="btn btn-primary btn-icon btn-sm"\
                                        data-bs-toggle="modal"\
                                        data-bs-target="#"\
                                        data-id="' + value._id + '"\
                                        data-ot_policy_name="' + value.adjustment_reason + '">\
                                        <i class="feather feather-edit"\
                                            data-bs-toggle="tooltip"\
                                            data-original-title="Edit"></i>\
                                    </a>\
                                </td>';
                                        response_data += '</tr>';
                                    }
                                });
                                $('#deduction-table tbody').html(response_data);
                                swal({
                                    title: "Success",
                                    text: "Successfully Added Reason(s)!",
                                    icon: "success",
                                });
                            } else {
                                swal({
                                    title: "Failed",
                                    text: "Please Select Required Fields!",
                                    icon: "warning",
                                });
                            }

                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Ajax Deduction

        // Ajax Clock-in Options
        $(document).on("click", '#btnClockInOption', function (e) {
            e.preventDefault();
            cs = $('#csrf').val()
            swal({
                title: "Are you sure?",
                text: "You want to add this Clock In Option?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {

                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/createclockinoptions/settings/',
                        data: $('#ci_options_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            if (data.status == "success") {
                                $('#cin-opt-table tbody').empty();
                                $('.cin-expanel').empty();
                                $('#addclockinoptionsmodal').modal('toggle');
                                var response_data = '';
                                $.each(JSON.parse(data.details), function (index, value) {
                                    response_data += '<tr>';
                                    response_data += '<td>' + value.clock_in_from +
                                        '</td>';
                                    response_data += '<td> <a class="btn btn-primary btn-icon btn-sm"\
                                        data-bs-toggle="modal"\
                                        data-bs-target="#"\
                                        data-id="' + value._id + '"\
                                        data-ot_policy_name="' + value.clock_in_from + '">\
                                        <i class="feather feather-edit"\
                                            data-bs-toggle="tooltip"\
                                            data-original-title="Edit"></i>\
                                    </a>\
                                </td>';
                                    response_data += '</tr>';
                                });
                                $('#cin-opt-table tbody').html(response_data);
                                swal({
                                    title: "Success",
                                    text: "Successfully Added Clock-in Options(s)!",
                                    icon: "success",
                                });
                            } else {
                                swal({
                                    title: "Failed",
                                    text: "Please Select Required Fields!",
                                    icon: "warning",
                                });
                            }

                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Clock-in Option


        // Ajax Leave Policy
        $(document).on("click", '#btnAddLeavePolicy', function (e) {
            e.preventDefault();
            cs = "{{csrf_token()}}"

            swal({
                title: "Are you sure?",
                text: "You want to add this leave policy!",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {

                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/createleavepolicy/settings/',
                        data: $('#leave_policy_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            $('#leavepolicy-table tbody').empty();
                            $('#addleavepolicymodal').modal('toggle');
                            var employee_data = '';
                            //console.log(data)
                            $.each(JSON.parse(data), function (index, value) {
                                employee_data += '<tr>';
                                employee_data +=
                                    '<td>' + value.leave_policy_name + '</td>';
                                employee_data += '<td>' + value.allowance_days +
                                    '</td>';
                                employee_data += '<td>' + value.allowance_type +
                                    '</td>';
                                employee_data += '<td>' + value.leave_type +
                                    '</td>';
                                employee_data += '<td>' + value.allow_on_probation +
                                    '</td>';
                                employee_data += '<td> <a class="btn btn-primary btn-icon btn-sm"\
                                    data-bs-toggle="modal"\
                                    data-bs-target="#editleavepolicymodal"\
                                    data-id="' + value._id.$oid + '"\
                                    data-leave_policy_name="' + value.leave_policy_name + '"\
                                    data-allowance_days="' + value.allowance_days + '"\
                                    data-allowance_type="' + value.allowance_type + '"\
                                    data-leave_type="' + value.leave_type + '"\
                                    data-allow_on_probation="' + value.allow_on_probation + '">\
                                    <i class="feather feather-edit"\
                                        data-bs-toggle="tooltip"\
                                        data-original-title="Edit"></i>\
                                </a>\
                                <a class="btn btn-danger btn-icon btn-sm btnDelleavepolicy" \
                                    data-bs-toggle="tooltip"\
                                    data-original-title="Delete"\
                                    data-id="' + value._id.$oid + '"\
                                    ><i \
                                    class="feather feather-trash-2"></i></a>\
                            </td>';
                                employee_data += '<tr>';
                            });
                            $('#leavepolicy-table tbody').html(employee_data);
                            swal({
                                title: "Success",
                                text: "Successfully Added Leave Policy(s)!",
                                icon: "success",
                            });
                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Leave Policy

        // Ajax Leave Approvers Config
        $(document).on("click", '#btnAddLeaveApprovers', function (e) {
            e.preventDefault();
            cs = $('#csrf').val()
            swal({
                title: "Are you sure?",
                text: "You want to add these approval level for this department?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {

                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/createleaveapprover/settings/',
                        data: $('#leave_approver_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            if (data.status == "success") {
                                //$('#cin-opt-table tbody').empty();
                                //$('.cin-expanel').empty();
                                $('#addleaveapprovermodal').modal('toggle');
                                swal({
                                    title: "Success",
                                    text: "Successfully Added Approval Level(s)!",
                                    icon: "success",
                                }).then(function () {
                                    $("#global-loader").show();
                                    location.reload();
                                });
                            } else {
                                swal({
                                    title: "Failed",
                                    text: "Please Select Required Fields!",
                                    icon: "warning",
                                });
                            }

                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Leave Approvers Config

        // Ajax Edit Leave Approvers Config
        $(document).on("click", '#btnEditLeaveApprovers', function (e) {
            e.preventDefault();
            cs = $('#csrf').val()
            swal({
                title: "Are you sure?",
                text: "You want to edit these approval level for this department?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {

                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/updateleaveapprover/settings/',
                        data: $('#edit_leave_approver_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            if (data.status == "success") {
                                //$('#cin-opt-table tbody').empty();
                                //$('.cin-expanel').empty();
                                $('#addleaveapprovermodal').modal('toggle');
                                swal({
                                    title: "Success",
                                    text: "Successfully Edited Approval Level(s)!",
                                    icon: "success",
                                }).then(function () {
                                    $("#global-loader").show();
                                    location.reload();
                                });
                            } else {
                                swal({
                                    title: "Failed",
                                    text: "Please Select Required Fields!",
                                    icon: "warning",
                                });
                            }

                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Edit Leave Approvers Config

        // Ajax Time Approvers Config
        $(document).on("click", '#btnAddTimeApprover', function (e) {
            e.preventDefault();
            cs = $('#csrf').val()
            swal({
                title: "Are you sure?",
                text: "You want to add this employee as time approver for this department?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {
                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/createtimeapprover/settings/',
                        data: $('#time_approver_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            if (data.status == "success") {
                                //$('#cin-opt-table tbody').empty();
                                //$('.cin-expanel').empty();
                                $('#addtimeapprovermodal').modal('toggle');
                                swal({
                                    title: "Success",
                                    text: "Successfully Set Time Approver!",
                                    icon: "success",
                                }).then(function () {
                                    $("#global-loader").show();
                                    location.reload();
                                });
                            } else {
                                swal({
                                    title: "Failed",
                                    text: "Please Select Required Fields!",
                                    icon: "warning",
                                });
                            }

                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Leave Approvers Config

        // Ajax Assign Roles
        $(document).on("click", '#btnAAssignRoles', function (e) {
            e.preventDefault();
            cs = $('#csrf').val()
            swal({
                title: "Are you sure?",
                text: "You want to assign these roles to employee(s)?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {
                    $("#global-loader").show();
                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/assign/roles/',
                        data: $('#assign_role_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            if (data.status == "success") {
                                //$('#cin-opt-table tbody').empty();
                                //$('.cin-expanel').empty();
                                $('#assignrolesmodal').modal('toggle');
                                $("#global-loader").hide();

                                swal({
                                    title: "Success",
                                    text: "Successfully Assigned Roles!",
                                    icon: "success",
                                }).then(function () {
                                    $("#global-loader").show();
                                    location.reload();
                                });
                            } else {
                                swal({
                                    title: "Failed",
                                    text: "Please Select Required Fields!",
                                    icon: "warning",
                                });
                            }

                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Assign Roles

        $(document).on("click", '#btnProcessEmployee', function (e) {
            e.preventDefault();
            cs = $('#csrf_token').val()
            employee_details_id = $('#employee_details_id').val()
            var form_data = new FormData();
            if (document.getElementById('employee_file_upload').files[0]) {
                form_data.append("files", document.getElementById('employee_file_upload').files[0]);
                form_data.append("employee_details_id", employee_details_id);
                swal({
                    title: "Are you sure?",
                    text: "You want to add these signature?",
                    icon: "info",
                    buttons: true,
                    dangerMode: true,
                }).then((willDelete) => {
                    if (willDelete) {
                        $("#global-loader").show();
                        $.ajax({
                            headers: {
                                'X-CSRF-TOKEN': cs
                            },
                            url: '/upload/signature',
                            cache: false,
                            contentType: false,
                            processData: false,
                            data: form_data,
                            type: 'post',
                        })
                            .done(function (data) {
                                $("#global-loader").fadeOut("slow");
                                if (data == "True") {
                                    $('#upload-file-employee')[0].reset();
                                    $(".dropify-clear").trigger("click");
                                    swal({
                                        title: "Success",
                                        text: "Successfully Added Signature Successfully!",
                                        icon: "success",
                                    });
                                } else {
                                    swal({
                                        title: "Error",
                                        text: "Cannot Process Empty File",
                                        icon: "error",
                                    });
                                }
                            })
                            .fail(function (err) {
                                console.log(err);
                                $('#message').html(err);
                            })
                    }
                });
            }
        });

        // Ajax Exchanges/Banks
        $(document).on("click", '#btnAddExchange', function (e) {
            e.preventDefault();
            cs = "{{csrf_token()}}"
            swal({
                title: "Are you sure?",
                text: "You want to add this Exchange/Banks?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {
                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/createexchange/settings/',
                        data: $('#exchange_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            if (data.status == "success") {
                                $('#exchange-table tbody').empty();
                                $('.exchange-expanel').empty();
                                $('#addexchangemodal').modal('toggle');
                                var response_data = '';
                                $.each(JSON.parse(data.details), function (index, value) {
                                    response_data += '<tr>';
                                    response_data += '<td>' + value
                                        .exchange_name +
                                        '</td>';
                                    response_data += '<td> <a class="btn btn-primary btn-icon btn-sm"\
                                    data-bs-toggle="modal"\
                                    data-bs-target="#"\
                                    data-id="' + value._id + '"\
                                    data-ot_policy_name="' + value.exchange_name + '">\
                                    <i class="feather feather-edit"\
                                        data-bs-toggle="tooltip"\
                                        data-original-title="Edit"></i>\
                                    </a>\
                                    </td>';
                                    response_data += '</tr>';
                                });
                                $('#exchange-table tbody').html(response_data);
                                swal({
                                    title: "Success",
                                    text: "Successfully Added Exchange/Bank!",
                                    icon: "success",
                                });
                            } else {
                                swal({
                                    title: "Failed",
                                    text: "Please Select Required Fields!",
                                    icon: "warning",
                                });
                            }

                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Ajax Deduction

        // Ajax Exchanges/Banks
        $(document).on("click", '#btnAddCompanyProfile', function (e) {
            e.preventDefault();
            cs = "{{csrf_token()}}"
            swal({
                title: "Are you sure?",
                text: "You want to add this Company Profile?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {
                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/createcompanyprofile/settings/',
                        data: $('#sub_company_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            if (data.status == "success") {
                                $('#company-profile-table tbody').empty();
                                $('.company-profile-expanel').empty();
                                $('#addcompanyprofilemodal').modal('toggle');
                                var response_data = '';
                                $.each(JSON.parse(data.details), function (index, value) {
                                    response_data += '<tr>';
                                    response_data += '<td>' + value
                                        .company_name +
                                        '</td>';
                                    response_data += '<td>' + value
                                        .company_unique_id +
                                        '</td>';
                                    /* response_data += '<td> <a class="btn btn-primary btn-icon btn-sm"\
                                     data-bs-toggle="modal"\
                                     data-bs-target="#"\
                                     data-id="' + value._id + '"\
                                     <i class="feather feather-edit"\
                                         data-bs-toggle="tooltip"\
                                         data-original-title="Edit"></i>\
                                     </a>\
                                     </td>'; */
                                    response_data += '</tr>';
                                });
                                $('#company-profile-table tbody').html(response_data);
                                swal({
                                    title: "Success",
                                    text: "Successfully Added Company Profile!",
                                    icon: "success",
                                });
                            } else {
                                swal({
                                    title: "Failed",
                                    text: "Please Select Required Fields!",
                                    icon: "warning",
                                });
                            }

                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Ajax Deduction

        // Ajax Super Approver Roles
        $(document).on("click", '#btnAAssignSuperApproverRole', function (e) {
            e.preventDefault();
            cs = $('#csrf').val()
            swal({
                title: "Are you sure?",
                text: "You want to assign super leave approver role to employee(s)?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {
                    $("#global-loader").show();
                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/assign/superapprover/',
                        data: $('#assign_super_approver_role_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            if (data.status == "success") {
                                $('#assignsuperapprovermodal').modal('toggle');
                                $("#global-loader").hide();
                                swal({
                                    title: "Success",
                                    text: "Successfully Assigned Roles!",
                                    icon: "success",
                                }).then(function () {
                                    $("#global-loader").show();
                                    location.reload();
                                });
                            } else {
                                swal({
                                    title: "Failed",
                                    text: "Please Select Required Fields!",
                                    icon: "warning",
                                });
                            }

                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Assign Roles
        $(document).on("click", '#btnddMultipleAccess', function (e) {
            e.preventDefault();
            var cs = $('#csrf').val();  // Get CSRF token
            var selectedEmployees = [];

            // Get the selected employees' IDs and emails
            $('select[name="employees[]"] option:selected').each(function() {
                var employeeId = $(this).val();
                var employeeEmail = $(this).data('email');
                selectedEmployees.push({ user_id: employeeId, email: employeeEmail });
            });
            // Check if at least one employee is selected
            if (selectedEmployees.length === 0) {
                swal({
                    title: "Failed",
                    text: "Please select at least one employee.",
                    icon: "warning",
                });
                return;
            }

            swal({
                title: "Are you sure?",
                text: "You want to assign multiple access to these employees?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willAssign) => {
                if (willAssign) {
                    $("#global-loader").show();  // Show loading spinner
                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/Creatmultiple/savemultipleaccess',  // Update with the server URL
                        type: 'POST',
                        data: JSON.stringify({ employees: selectedEmployees }),  // Send selected employees data
                        contentType: 'application/json',  // Set the content type as JSON
                    })
                    .done(function (data) {
                        if (data.success) {
                            $('#AddMultipleAccess').modal('hide');  // Close the modal
                            $("#global-loader").hide();  // Hide the loader

                            swal({
                                title: "Success",
                                text: "Multiple access successfully assigned!",
                                icon: "success",
                            }).then(function () {
                                location.reload();  // Reload the page after success
                            });
                        } else {
                            swal({
                                title: "Failed",
                                text: data.message || "Please try again.",
                                icon: "warning",
                            });
                        }
                    })
                    .fail(function (err) {
                        console.log(err);
                        $('#message').html(err);
                        $("#global-loader").hide();  // Hide the loader in case of failure
                        swal({
                            title: "Error",
                            text: "An error occurred. Please try again later.",
                            icon: "error",
                        });
                    });
                }
            });
        });


        $(document).on("click", '.btnDeleteMultipleAccess', function (e) {
            e.preventDefault();
            let csrfToken = $('#csrf').val();
            let dataId = $(this).data('id');
            alert(dataId);
            
            swal({
                title: "Are you sure?",
                text: "You want to edit these approval levels for this department?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {
                    $.ajax({
                        headers: {
                            'X-CSRF-TOKEN': csrfToken
                        },
                        url: '/deletemultipleaccess/settings',
                        type: 'POST',
                        data: { dataId: dataId }, // Correct way to send dataId as form data
                        success: function (data) {
                            if (data.status === "success") {
                                swal({
                                    title: "Success",
                                    text: "Successfully Edited Approval Level(s)!",
                                    icon: "success",
                                }).then(function () {
                                    $("#global-loader").show();
                                    location.reload();
                                });
                            } else {
                                swal({
                                    title: "Failed",
                                    text: data.message || "Please Select Required Fields!",
                                    icon: "warning",
                                });
                            }
                        },
                        error: function (err) {
                            console.log(err);
                            $('#message').html(err);
                        }
                    });
                }
            });
        });

        
        // Ajax Add Biometric Devices
        $(document).on("click", '#btnAddBiometric', function (e) {
            e.preventDefault();
            cs = $('#biometric_csrf_token').val()
            swal({
                title: "Are you sure?",
                text: "You want to add this Biometric Device?",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            }).then((willDelete) => {
                if (willDelete) {

                    $.ajax({

                        headers: {
                            'X-CSRF-TOKEN': cs
                        },
                        url: '/createbiometricdevice/settings/',
                        data: $('#biometric_form').serialize(),
                        type: 'POST',
                    })
                        .done(function (data) {
                            if (data.status == "success") {
                                $('#biometric-table tbody').empty();
                                $('#addbiometricmodal').modal('toggle');
                                $('.biometric-expanel').empty();

                                var response_data = '';
                                $.each(JSON.parse(data.details), function (index, value) {

                                    response_data += '<tr>';
                                    response_data += '<td>' + value
                                        .device_name +
                                        '</td>';
                                    response_data += '<td>' + value
                                        .device_ip_address +
                                        '</td>';
                                    response_data += '<td>' + value
                                        .device_port +
                                        '</td>';
                                    response_data += '<td> <a class="btn btn-primary btn-icon btn-sm"\
                                                data-bs-toggle="modal"\
                                                data-bs-target="#"\
                                                data-id="' + value._id + '"\
                                                data-ot_policy_name="' + value.adjustment_reason + '">\
                                                <i class="feather feather-edit"\
                                                    data-bs-toggle="tooltip"\
                                                    data-original-title="Edit"></i>\
                                            </a>\
                                        </td>';

                                    response_data += '</tr>';
                                });
                                $('#biometric-table tbody').html(response_data);
                                swal({
                                    title: "Success",
                                    text: "Successfully Added Biometric Device(s)!",
                                    icon: "success",
                                });
                            } else {
                                swal({
                                    title: "Failed",
                                    text: "Please Select Required Fields!",
                                    icon: "warning",
                                });
                            }

                        })
                        .fail(function (err) {
                            console.log(err);
                            $('#message').html(err);
                        })
                }
            });
        });
        //EnD Ajax Addition
    });
</script>

<script>
    $(document).on("show.bs.modal", '#editworkmodal', function (e) {
        var id = $(e.relatedTarget).data('id');
        var schedule_name = $(e.relatedTarget).data('schedule_name');
        var is_day_off = $(e.relatedTarget).data('is_day_off');
        var office_start_at = $(e.relatedTarget).data('office_start_at');
        var office_end_at = $(e.relatedTarget).data('office_end_at');
        var schedule_color = $(e.relatedTarget).data('schedule_color');
        var late_arrival__later_than = $(e.relatedTarget).data('late_arrival__later_than');
        var early_departure_earliar_than = $(e.relatedTarget).data('early_departure_earliar_than');
        var is_default = $(e.relatedTarget).data('is_default');
        var consider_absent_after = $(e.relatedTarget).data('consider_absent_after');
        var minimum_ot = $(e.relatedTarget).data('minimum_ot');

        var week_offs = $(e.relatedTarget).data('week_offs');

        $("#edit_work_timing_id").val(id);
        $("#edit_work_timing_name").val(schedule_name);
        $("#edit_schedule_color").val(schedule_color);

        $("#edit_office_start_at").val(office_start_at);
        $("#edit_office_end_at").val(office_end_at);
        $("#edit_late_arrival__later_than").val(late_arrival__later_than);

        $("#edit_early_departure_earliar_than").val(early_departure_earliar_than);
        $("#edit_consider_absent_after").val(consider_absent_after);

        $("#edit_is_default").val(is_default);
        $("#edit_minimum_ot").val(minimum_ot);


        if (is_default === "True" || is_default == true) {
            $("#edit_is_default").attr("checked", "checked");
        } else {
            $("#edit_is_default").removeAttr("checked");
        }

        if (is_day_off === "True" || is_day_off == true) {
            $("#edit_is_day_off").attr("checked", "checked");
            $('.edit_day_off_div').hide();
        } else {
            $("#edit_is_day_off").removeAttr("checked");
            $('.edit_day_off_div').show();
        }
        if (week_offs) {
            $.each([week_offs], function (index, value) {
                $("#edit_week_offs_" + value).attr("checked", "checked");
            });
        } else {
            $.each(['0', '1', '2', '3', '4', '5', '6'], function (index, value) {
                $("#edit_week_offs_" + value).removeAttr("checked");
            });
        }
    });
</script>
<script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDeeEzz6bIkKS91kBSsTpbp0C8TcMvoC8Y&libraries=places&v=weekly"
    async defer></script>
<script>
    "use strict";
    navigator.geolocation.getCurrentPosition(
        function (position) {
            initMap(position.coords.latitude, position.coords.longitude)
            $('#location-latitude').val(position.coords.latitude)
            $('#location-longitude').val(position.coords.longitude)
        },
        function errorCallback(error) {
            console.log(error)
        }
    );

    function initMap(lat, lng) {
        const CONFIGURATION = {
            "ctaTitle": "Add Office",
            "mapOptions": {
                "center": {
                    "lat": 37.4221,
                    "lng": -122.0841
                },
                "fullscreenControl": false,
                "mapTypeControl": false,
                "streetViewControl": false,
                "zoom": 15,
                "zoomControl": true,
                "maxZoom": 22
            },
            "mapsApiKey": "AIzaSyDeeEzz6bIkKS91kBSsTpbp0C8TcMvoC8Y",
            "capabilities": {
                "addressAutocompleteControl": true,
                "mapDisplayControl": true,
                "ctaControl": true
            }
        };
        const componentForm = [
            'location',
            'locality',
            'administrative_area_level_1',
            'country',
            'postal_code',
        ];

        const getFormInputElement = (component) => document.getElementById(component + '-input');
        const map = new google.maps.Map(document.getElementById("gmp-map"), {
            zoom: CONFIGURATION.mapOptions.zoom,
            center: {
                "lat": parseFloat(lat),
                "lng": parseFloat(lng)
            },
            mapTypeControl: false,
            fullscreenControl: CONFIGURATION.mapOptions.fullscreenControl,
            zoomControl: CONFIGURATION.mapOptions.zoomControl,
            streetViewControl: CONFIGURATION.mapOptions.streetViewControl
        });
        const marker = new google.maps.Marker({
            position: map.center,
            map: map,
            draggable: false,
        });
        const autocompleteInput = getFormInputElement('location');
        const autocomplete = new google.maps.places.Autocomplete(autocompleteInput, {
            fields: ["formatted_address", "geometry", "name"],
            strictBounds: false,
            radius: '500',
            //types: ["establishment"],
        });
        autocomplete.addListener('place_changed', function () {
            marker.setVisible(true);
            const place = autocomplete.getPlace();
            if (!place.geometry) {
                // User entered the name of a Place that was not suggested and
                // pressed the Enter key, or the Place Details request failed.
                window.alert('No details available for input: \'' + place.name + '\'');
                return;
            }
            renderAddress(place);
        });

        function renderAddress(place) {
            map.setCenter(place.geometry.location);
            marker.setPosition(place.geometry.location);
            marker.setVisible(true);
            const cityCircle = new google.maps.Circle({
                strokeColor: "#FF0000",
                strokeOpacity: 0.8,
                strokeWeight: 2,
                fillColor: "#0DCD93",
                fillOpacity: 0.35,
                map,
                center: place.geometry.location,
                radius: parseInt($('#location-radius').val()),
            });
            $('#location-latitude').val(map.getCenter().lat())
            $('#location-longitude').val(map.getCenter().lng())
            var rad = $('#location-radius').keyup(function () {
                cityCircle.setRadius(parseInt($('#location-radius').val()));
            });
        }
    }
</script>
<script>
    //Daterangepicker with Callback
    $('input[name="daterange"]').focusin(function () {
        $('input[name="daterange"]').daterangepicker({
            opens: 'below',
            locale: {
                format: 'MMMM DD'
            },
        }, function (start, end, label) {
            //console.log("A new date selection was made: " + start.format('MMMM D') + ' to ' + end.format(MMMM D'));
        });
    });


    $('#leave_cycle').change(function () {
        var selected_value = $(this).val();
        if (selected_value == "custom_cycle") {
            $("#daterange_div").removeClass('d-none');
        } else {
            $("#daterange_div").addClass('d-none');
        }
    });

    $(document).ready(function () {
        var id = 1;
        $("#approval_level").change(function () {
            var selected_app_level = $('#approval_level :selected').attr("data-approval-level")
            $(".approvers").empty();
            $('.approvers').addClass('d-none')
            $('#approval_department').val('');
            for (let i = 0; i < selected_app_level; i++) {
                $(".approvers").append('<div class="form-group">\
                    <div class="row">\
                        <div class="col-md-12">\
                            <label class="form-label"> Select Level ' + (i + 1) + ' ' + 'Approver*</label>\
                            <select class="form-control select2-show-search custom-select select2insidemodal" name="leave_approver[]" required>\
                            </select>\
                        </div>\
                    </div>\
                </div>');
            }
        });
    });

    $(document).ready(function () {
        var id = 1;
        $("#edit_approval_level").change(function () {
            var selected_app_level = $('#edit_approval_level :selected').attr("data-approval-level")
            var department_name = $('#edit_approval_department :selected').text()

            $(".edit_approvers").empty();
            $.ajax({
                headers: {
                    'X-CSRF-TOKEN': "{{csrf_token()}}"
                },
                url: '/getemployeesbydept',
                data: {
                    selected_department: department_name
                },
                type: 'GET',
            })
                .done(function (data) {
                    if (data.status === "success") {
                        var employee_data = '';
                        var manager_data = '';
                        var over_all_emp = JSON.parse(data.details).length + JSON.parse(data
                            .managers).length
                        if (over_all_emp >= selected_app_level) {
                            for (var i = 1; i <= selected_app_level; i++) {
                                $(".edit_approvers").append('<div class="form-group">\
                                <div class="row">\
                                    <div class="col-md-12">\
                                        <label class="form-label"> Re Select Level ' + (i) + ' ' + 'Approver*</label>\
                                        <select class="form-control select2-show-search custom-select select2insidemodal1" name="edit_leave_approver[]" required>\
                                        </select>\
                                    </div>\
                                </div>\
                            </div>');
                            }
                            $.each(JSON.parse(data.details), function (index, value) {
                                employee_data += '<option value=' + value._id.$oid + '>' +
                                    value.first_name + ' ' + value.last_name + '</option>';
                            });
                            $.each(JSON.parse(data.managers), function (index, value) {
                                manager_data += '<option value=' + value._id.$oid + '>' +
                                    value.first_name + ' ' + value.last_name + '</option>';
                            });
                            $('.select2insidemodal1').empty()
                            $('.select2insidemodal1').append('<optgroup label="ALL MANAGERS">' +
                                manager_data + '</optgroup>')
                            $('.select2insidemodal1').append('<optgroup label="' + department_name +
                                ' EMPLOYEES">' + employee_data + '</optgroup>')
                            $(".select2insidemodal1").select2({
                                dropdownParent: $("#editleaveapprovermodal")
                            });
                            $('.edit_approvers').removeClass('d-none')
                            $("#global-loader").hide();
                        } else {
                            $("#global-loader").hide();
                            $('.edit_approvers').removeClass('d-none')
                            $('.edit_approvers').empty()
                            $('.edit_approvers').append(
                                '<span class="font-italic text-danger">*Not enough users in department for selected approval level.</span>'
                            )
                        }

                    } else {
                        $("#global-loader").hide();
                        $('.edit_approvers').removeClass('d-none')
                        $('.edit_approvers').empty()
                        $('.edit_approvers').append(
                            '<span class="font-italic text-danger">*No Users found in this Department.</span>'
                        )
                    }

                })
                .fail(function (err) {
                    console.log(err);
                    $('#message').html(err);
                })
        });
    });

    $(document).change(function () {
        $(".select2insidemodal").select2({
            dropdownParent: $("#addleaveapprovermodal")
        });
    });

    // Ajax Leave Policy
    $(document).on("change", '#approval_department', function (e) {
        e.preventDefault();
        cs = "{{csrf_token()}}"
        var selected_department = $('#approval_department :selected').text()
        var selected_app_level = $('#approval_level :selected').attr("data-approval-level")
        $("#global-loader").show();
        $.ajax({
            headers: {
                'X-CSRF-TOKEN': cs
            },
            url: '/getemployeesbydept',
            data: {
                selected_department: selected_department
            },
            type: 'GET',
        })
            .done(function (data) {
                if (data.status === "success") {
                    var employee_data = '';
                    var manager_data = '';
                    var hod_data = '';
                    var over_all_emp = JSON.parse(data.details).length + JSON.parse(data.managers).length
                    if (over_all_emp >= selected_app_level) {
                        $.each(JSON.parse(data.details), function (index, value) {
                            employee_data += '<option value=' + value._id.$oid + '>' + value
                                .first_name + ' ' + value.last_name + '</option>';
                        });
                        $.each(JSON.parse(data.managers), function (index, value) {
                            manager_data += '<option value=' + value._id.$oid + '>' + value
                                .first_name + ' ' + value.last_name + '</option>';
                        });
                        $.each(JSON.parse(data.hod_details), function (index, value) {
                            hod_data += '<option value=' + value._id.$oid + '>' + value
                                .first_name + ' ' + value.last_name + '</option>';
                        });
                        $('.select2insidemodal').empty()
                        $('.select2insidemodal').append('<optgroup label="ALL MANAGERS">' + manager_data +
                            '</optgroup>')
                        $('.select2insidemodal').append('<optgroup label="Head Of Departments">' + hod_data +
                            '</optgroup>')
                        $('.select2insidemodal').append('<optgroup label="' + selected_department +
                            ' EMPLOYEES">' + employee_data + '</optgroup>')
                        $('.approvers').removeClass('d-none')
                        $("#global-loader").hide();
                    } else {
                        $("#global-loader").hide();
                        $('.approvers').removeClass('d-none')
                        $('.approvers').empty()
                        $('.approvers').append(
                            '<span class="font-italic text-danger">*Not enough users in department for selected approval level.</span>'
                        )
                    }

                } else {
                    $("#global-loader").hide();
                    $('.approvers').removeClass('d-none')
                    $('.approvers').empty()
                    $('.approvers').append(
                        '<span class="font-italic text-danger">*No Users found in this Department.</span>'
                    )
                }

            })
            .fail(function (err) {
                console.log(err);
                $('#message').html(err);
            })
    });
    //EnD Leave Policy

    // Ajax Time Approvers Policy
    $(document).on("change", '#time_approval_department', function (e) {
        e.preventDefault();
        cs = "{{csrf_token()}}"
        var selected_department = $('#time_approval_department :selected').text()
        $("#global-loader").show();
        $.ajax({
            headers: {
                'X-CSRF-TOKEN': cs
            },
            url: '/getemployeesbydept',
            data: {
                selected_department: selected_department
            },
            type: 'GET',
        })
            .done(function (data) {
                if (data.status === "success") {
                    var employee_data = '';
                    var manager_data = '';
                    var over_all_emp = JSON.parse(data.details).length + JSON.parse(data.managers).length
                    $.each(JSON.parse(data.details), function (index, value) {
                        employee_data += '<option value=' + value._id.$oid + '>' + value
                            .first_name + ' ' + value.last_name + '</option>';
                    });
                    $.each(JSON.parse(data.managers), function (index, value) {
                        manager_data += '<option value=' + value._id.$oid + '>' + value.first_name +
                            ' ' + value.last_name + '</option>';
                    });
                    $('#select2insidemodal_ta').empty()
                    $('#select2insidemodal_ta').append('<optgroup label="ALL MANAGERS">' + manager_data +
                        '</optgroup>')
                    $('#select2insidemodal_ta').append('<optgroup label="' + selected_department +
                        ' EMPLOYEES">' + employee_data + '</optgroup>')
                    $('.time_approvers').removeClass('d-none')
                    $("#global-loader").hide();
                } else {
                    $("#global-loader").hide();
                    $('.time_approvers').addClass('d-none')
                    $('.time_approvers').empty()
                    $('.time_approvers').append(
                        '<span class="font-italic text-danger">*No Users found in this Department.</span>'
                    )
                }

            })
            .fail(function (err) {
                console.log(err);
                $('#message').html(err);
            })
    });
    //EnD Leave Policy

    // Ajax Leave Policy
    $(document).on("change", '#disable_leave_application', function (e) {
        //e.preventDefault();
        cs = "{{csrf_token()}}"
        var selected_option = $('#disable_leave_application').val()
        swal({
            title: "Are you sure?",
            text: "You want to enable/disable the leave applications for employees?",
            icon: "warning",
            buttons: true,
            dangerMode: true,
        }).then((willDelete) => {
            if (willDelete) {
                $("#global-loader").show();
                $.ajax({
                    headers: {
                        'X-CSRF-TOKEN': cs
                    },
                    url: '/update/leaveapplicationstatus/',
                    data: {
                        selected_option: selected_option
                    },
                    type: 'POST',
                })
                    .done(function (data) {
                        if (data.status == "success") {
                            //$('#cin-opt-table tbody').empty();
                            //$('.cin-expanel').empty();
                            $("#global-loader").hide();
                            swal({
                                title: "Success",
                                text: "Successfully Saved Leave Application Status!",
                                icon: "success",
                            })
                        } else {
                            $("#global-loader").hide();
                            swal({
                                title: "Failed",
                                text: "Please Select Required Fields!",
                                icon: "warning",
                            });
                        }
                    })
                    .fail(function (err) {
                        console.log(err);
                        $('#message').html(err);
                    })
            }
        });
    });
    //EnD Leave Policy
    // Allowance type Change
    $('#allowance_type').change(function () {
        var selected_value = $(this).val();
        if (selected_value == "onetime") {
            $("#monthly_allowance_type").removeClass('d-none');
            $("#allowance_days").addClass('d-none');
        } else {
            $("#monthly_allowance_type").addClass('d-none');
            $("#allowance_days").removeClass('d-none');
        }
    });
</script>
<script>
    $(document).on("show.bs.modal", '#editleaveapprovermodal', function (e) {
        var id = $(e.relatedTarget).data('id');
        var approval_level = $(e.relatedTarget).data('approval_level');
        var department_name = $(e.relatedTarget).data('department_name');
        $('#edit_approval_level').val(approval_level)
        $('#edit_approval_department').val(department_name)
        $('#edit_department_name').val(department_name)
        $('#edit_leave_app_id').val(id)
        $('.edit_approvers').empty()
        cs = "{{csrf_token()}}"
        $("#global-loader").show();
        $.ajax({
            headers: {
                'X-CSRF-TOKEN': cs
            },
            url: '/getemployeesbydept',
            data: {
                selected_department: department_name
            },
            type: 'GET',
        })
            .done(function (data) {
                if (data.status === "success") {
                    var employee_data = '';
                    var manager_data = '';
                    var over_all_emp = JSON.parse(data.details).length + JSON.parse(data.managers).length
                    if (over_all_emp >= approval_level) {
                        for (var i = 1; i <= approval_level; i++) {
                            $(".edit_approvers").append('<div class="form-group">\
                                <div class="row">\
                                    <div class="col-md-12">\
                                        <label class="form-label"> Select Level ' + (i) + ' ' +
                                'Approver*</label>\
                                        <select class="form-control select2-show-search custom-select select2insidemodal1" name="edit_leave_approver[]" id="approver_' +
                                i + '" required>\
                                        </select>\
                                    </div>\
                                </div>\
                            </div>');
                        }
                        $('.select2insidemodal1').empty()
                        for (var i = 1; i <= approval_level; i++) {
                            var _id = "#approver_" + i;
                            var approver_name = "approver_" + i + "_name";
                            var approver_id = "approver_" + i;
                            var current_approver_name = $(e.relatedTarget).data(approver_name);
                            var current_approver_id = $(e.relatedTarget).data(approver_id);

                            console.log(current_approver_name)
                            console.log(current_approver_id)
                            selected_emp = '<option value=' + current_approver_id +
                                ' selected="selected">' + current_approver_name + '</option>';
                            $('.select2insidemodal1' + _id).append('<optgroup label="Current Approver">' +
                                selected_emp + '</optgroup>')
                            // $('.select2insidemodal1'+ _id).append('"<optgroup label="Current Selected"><option value='+current_approver_id+' selected="selected"">'+current_approver_name+'</option></optgroup>')
                        }
                        $.each(JSON.parse(data.details), function (index, value) {
                            employee_data += '<option value=' + value._id.$oid + '>' + value
                                .first_name + ' ' + value.last_name + '</option>';
                        });
                        $.each(JSON.parse(data.managers), function (index, value) {
                            manager_data += '<option value=' + value._id.$oid + '>' + value
                                .first_name + ' ' + value.last_name + '</option>';
                        });
                        $('.select2insidemodal1').append('<optgroup label="ALL MANAGERS">' + manager_data +
                            '</optgroup>')
                        $('.select2insidemodal1').append('<optgroup label="' + department_name +
                            ' EMPLOYEES">' + employee_data + '</optgroup>')
                        $(".select2insidemodal1").select2({
                            dropdownParent: $("#editleaveapprovermodal")
                        });


                        $('.edit_approvers').removeClass('d-none')
                        $("#global-loader").hide();
                    } else {
                        $("#global-loader").hide();
                        $('.edit_approvers').removeClass('d-none')
                        $('.edit_approvers').empty()
                        $('.edit_approvers').append(
                            '<span class="font-italic text-danger">*Not enough users in department for selected approval level.</span>'
                        )
                    }

                } else {
                    $("#global-loader").hide();
                    $('.edit_approvers').removeClass('d-none')
                    $('.edit_approvers').empty()
                    $('.edit_approvers').append(
                        '<span class="font-italic text-danger">*No Users found in this Department.</span>'
                    )
                }

            })
            .fail(function (err) {
                console.log(err);
                $('#message').html(err);
            })

    });
    $(function () {
        $('[data-toggle="popover"]').popover({
            placement: 'left',
            html: true,
            trigger: 'hover',
            content: function () {
                var pop_dest = $(this).attr("data-pop");
                $("." + pop_dest).toggle()
                return $("." + pop_dest).html();
            }
        })
    })

    // Email-SMTP
    $(document).on("click", '#email-smtp', function () {
        if (this.checked) {
            $('body').toggleClass("add-smtpemail");
            localStorage.setItem("add-smtpemail", "True");
        } else {
            $('body').removeClass("add-smtpemail");
            localStorage.setItem("add-smtpemail", "false");
        }
    });
</script>

<script>
    $('#editCompanyModal').on('show.bs.modal', function (e) {
        var id = $(e.relatedTarget).data('id');
        var company_name = $(e.relatedTarget).data('company_name');
        var company_unique_id = $(e.relatedTarget).data('company_unique_id');
        var company_account_number = $(e.relatedTarget).data('company_account_number');
        var company_routing_code = $(e.relatedTarget).data('company_routing_code');
        
        $("#edit_sub_company_id").val(id);
        $("#edit_company_name").val(company_name);
        $("#edit_company_unique_id").val(company_unique_id);
        $("#edit_company_account_number").val(company_account_number);
        $("#edit_company_routing_code").val(company_routing_code);
    });
</script>
{% endblock %}